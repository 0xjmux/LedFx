(this.webpackJsonpledfx=this.webpackJsonpledfx||[]).push([[0],{395:function(e,t){e.exports="data:image/png;base64,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"},409:function(e,t,a){e.exports=a(593)},591:function(e,t,a){},593:function(e,t,a){"use strict";a.r(t);var n,c=a(0),r=a.n(c),i=a(15),o=a.n(i),s=a(40),l=a(26),u=a(611),d=a(627),p=a(18),m=a(19),f=a(20),v=a(21),b=a(14),h=a(27),g=a.n(h),E=a(13),O=a.n(E),y=a(25),j=a(401),x=a(9),k=a(638),C=a(636),D=a(378),w=a.n(D).a.create({baseURL:"/api"});function A(e){return w.post("/devices",e)}function S(e){return w.get("/devices/".concat(e)).then((function(t){var a=t.data;return{key:e,id:e,name:a.name,config:a}}))}function N(e){return w.get("devices/".concat(e,"/effects"))}function P(e,t){return w.post("devices/".concat(e,"/effects"),t)}function T(e,t){return w.put("devices/".concat(e,"/effects"),t)}function I(e){return w.delete("devices/".concat(e,"/effects"))}function F(e){return w.get("devices/".concat(e,"/presets"))}function M(e,t){return w.put("devices/".concat(e,"/presets"),t)}var L=Object(k.a)("".concat("devices","/DEVICES_REQUESTED")),z=Object(k.a)("".concat("devices","/DEVICES_RECEIVED")),W=Object(k.a)("".concat("devices","/DEVICE_UPDATED")),R=Object(C.a)((n={},Object(b.a)(n,L,(function(e){return Object(x.a)({},e,{isLoading:!0})})),Object(b.a)(n,z,(function(e,t){var a=t.payload;return Object(x.a)({},e,{list:Q(a),dictionary:a,isLoading:!1,receivedAt:Date.now()})})),Object(b.a)(n,W,(function(e,t){var a=t.payload,n=a.id,c=Object(j.a)(a,["id"]),r=Object(x.a)({},e.dictionary,Object(b.a)({},n,Object(x.a)({},e.dictionary[n],{},c)));return Object(x.a)({},e,{list:Q(r),dictionary:r})})),n),{isLoading:!1,list:[],dictionary:{}});function B(){return function(){var e=Object(y.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(L()),e.prev=1,e.next=4,w.get("/devices");case 4:"OK"===(a=e.sent).statusText&&(n=a.data.devices,Object.keys(n).forEach((function(e){var t=n[e];t.effect.active=!!t.effect.name})),t(z(n))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Error fetching devices",e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}var V,Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){var a=e[t];return Object(x.a)({},a,{key:t,id:t,name:a.config.name})}))};var U=Object(k.a)("".concat("schemas","/SCHEMAS_FETCHING")),H=Object(k.a)("".concat("schemas","/SCHEMAS_FETCHED")),G={isLoading:!1,deviceTypes:void 0,effects:void 0},K=Object(C.a)((V={},Object(b.a)(V,U,(function(e){return Object(x.a)({},e,{isLoading:!0})})),Object(b.a)(V,H,(function(e,t){var a=t.payload,n=a.deviceTypes,c=a.effects;return Object(x.a)({},e,{isLoading:!1,effects:c,deviceTypes:n,receivedAt:Date.now()})})),V),G);var q,J=a(623),X=a(635),Z=a(265),Y=a(637),_=a(54),$=a(394),ee=a.n($),te=a(388),ae=a.n(te),ne=a(389),ce=a.n(ne),re=a(391),ie=a.n(re),oe=a(393),se=a.n(oe),le=a(390),ue=a.n(le),de=a(392),pe=a.n(de),me=a(357),fe=a(615),ve=a(612),be=a(194),he=a(380),ge="".concat("ws://localhost:8888","/api/websocket"),Ee=function(e){return new he.a(ge,Object(x.a)({timeout:5e3,maxAttempts:10},e))},Oe=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleMessage=function(e){var t=JSON.parse(e.data);t.device_id===n.props.device.id&&n.setState((function(e){var a=e.chartData,n=e.chartData.datasets;return{chartData:Object(x.a)({},a,{datasets:[Object(x.a)({},n[0],{data:t.pixels[0]}),Object(x.a)({},n[1],{data:t.pixels[1]}),Object(x.a)({},n[2],{data:t.pixels[2]})]})}}))},n.handleOpen=function(e){n.enablePixelVisualization(n.props.device),n.websocketActive=!0},n.handleClose=function(e){n.websocketActive=!1},n.enablePixelVisualization=function(e){n.ws&&(n.ws.json({id:n.websocketPacketId,type:"subscribe_event",event_type:"device_update",event_filter:{device_id:e.id}}),n.deviceUpdateSubscription=n.websocketPacketId,n.websocketPacketId++)},n.disablePixelVisualization=function(){n.ws.json({id:n.websocketPacketId,type:"unsubscribe_event",subscription_id:n.deviceUpdateSubscription}),n.deviceUpdateSubscription=null,n.websocketPacketId++},n.connectWebsocket=function(){n.ws=Ee({timeout:5e3,maxAttempts:10,onopen:n.handleOpen,onmessage:n.handleMessage,onclose:n.handleClose,onerror:function(e){return console.log("WebSocket Error:",e)}})},n.disconnectWebsocket=function(){void 0!==n.ws&&n.websocketActive&&(n.ws.close(1e3),n.ws=void 0)},n.ws=void 0,n.websocketActive=!1,n.websocketPacketId=1,n.deviceUpdateSubscription=null,n.state=n.getChartOptionsForDevice(e.device),n}return Object(m.a)(a,[{key:"getChartOptionsForDevice",value:function(e){var t=e.config.pixel_count;return{chartData:{labels:Array.apply(null,{length:t}).map(Function.call,Number),datasets:[{label:"Red",lineTension:.1,backgroundColor:"rgba(255,0,0,0.5)",borderColor:"rgba(255,0,0,1)",pointRadius:0,data:new Array(t).fill(0)},{label:"Green",lineTension:.1,backgroundColor:"rgba(0,255,0,0.5)",borderColor:"rgba(0,255,0,1)",pointRadius:0,data:new Array(t).fill(0)},{label:"Blue",lineTension:.1,backgroundColor:"rgba(0,0,255,0.5)",borderColor:"rgba(0,0,255,1)",pointRadius:0,data:new Array(t).fill(0)}]},chartOptions:{responsive:!0,maintainAspectRatio:!1,tooltips:{enabled:!1},hover:{mode:null,animationDuration:0},animation:{duration:0},responsiveAnimationDuration:0,scales:{xAxes:[{gridLines:{display:!1},ticks:{max:t,min:0,maxTicksLimit:7}}],yAxes:[{ticks:{display:!1,min:0,max:256,stepSize:64},gridLines:{display:!1,color:"rgba(0, 0, 0, .125)"}}]},legend:{display:!1}}}}},{key:"componentDidMount",value:function(){this.connectWebsocket()}},{key:"componentWillUnmount",value:function(){this.disconnectWebsocket()}},{key:"componentDidUpdate",value:function(e){this.props.device.id!==e.device.id&&this.websocketActive&&(this.disablePixelVisualization(),this.enablePixelVisualization(e.device),this.setState(this.getChartOptionsForDevice(e.device)))}},{key:"render",value:function(){return r.a.createElement(be.a,{data:this.state.chartData,options:this.state.chartOptions})}}]),a}(r.a.Component),ye=g()((function(e){return{content:{minWidth:120,maxWidth:"100%"}}}))(Oe),je=a(355),xe=a(614),ke=a(613),Ce=a(78),De=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).toggleOn=function(t){var a=t.target.checked,n=e.props,c=n.device;(0,n.setDeviceEffect)(c.id,Object(x.a)({},c.effect,{active:a}))},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.device,n=a.id,c=a.config,i=a.effect;return r.a.createElement(ve.a,{container:!0,direction:"row",spacing:1},r.a.createElement(ve.a,{item:!0,xs:8},r.a.createElement(_.a,{variant:"h5",color:"inherit",className:t.header},c.name),r.a.createElement(_.a,{variant:"caption",color:"inherit",className:t.subHeader},"Effect: ",i.name)),r.a.createElement(ve.a,{item:!0,xs:4,className:t.actionsContainer},r.a.createElement(je.a,{component:Ce.a,to:"/devices/".concat(n),className:t.deviceLink,key:n},"Change Effect"),r.a.createElement(ve.a,{container:!0,justify:"center",alignContent:"center",className:t.toggleContainer},i.isProcessing?r.a.createElement(ke.a,{size:20}):r.a.createElement(xe.a,{checked:i.active,onChange:this.toggleOn,color:"primary"}))))}}]),a}(r.a.Component),we=g()((function(e){return{button:{margin:e.spacing(1),float:"right"},submitControls:{margin:e.spacing(1),display:"block",width:"100%"},tableCell:{lineHeight:"1.2",padding:"12px 8px",verticalAlign:"middle"},deviceLink:{textDecoration:"none","&,&:hover":{color:"#000000"}},header:{margin:0},subHeader:{margin:0,color:"#333333"},actionsContainer:{display:"flex",justifyContent:"flex-end"},toggleContainer:{width:"70px"}}}))(De),Ae=a(208),Se=a(356),Ne=a(358),Pe=Object(Se.a)({button:{display:"flex",justifyContent:"flex-end",alignItems:"center"}}),Te={name:"",error:""},Ie=function(e,t){return!t.some((function(t){return t.name.toLowerCase()===e.toLowerCase()}))},Fe=function(e){var t=e.scenes,a=void 0===t?{}:t,n=e.addScene,i=Pe(),o=Object(c.useReducer)((function(e,t){return Object(x.a)({},e,{},t)}),Te),s=Object(Ae.a)(o,2),l=s[0],u=s[1],d=l.name,p=l.error;return r.a.createElement(me.a,null,r.a.createElement(fe.a,null,r.a.createElement(_.a,{variant:"h5"},"Add Scene"),r.a.createElement(_.a,null,"Save current effects of all devices as a Scene"),r.a.createElement(ve.a,{container:!0},r.a.createElement(ve.a,{item:!0,xs:11},r.a.createElement(Ne.a,{error:!!p,id:"SceneNameInput",label:"Scene Name",onChange:function(e){var t=e.target.value,n=Ie(t,a.list)?"":"Scene name already in use!";u({name:t,error:n})},fullWidth:!0,helperText:p})),r.a.createElement(ve.a,{item:!0,xs:3,md:1,className:i.button},r.a.createElement(je.a,{color:"primary",size:"medium","aria-label":"Save",disabled:!!p||!d.length,variant:"contained",onClick:function(){n(d)}},"Save")))))};function Me(e){return w.post("/scenes",{name:e})}function Le(e){return w.delete("/scenes",{data:{id:e}})}function ze(e){return w.put("/scenes",{id:e,action:"activate"})}var We=Object(k.a)("".concat("sceneManagement","/SCENES_FETCHING")),Re=Object(k.a)("".concat("sceneManagement","/SCENES_FETCHED")),Be=Object(k.a)("".concat("sceneManagement","/SCENE_ADDING")),Ve=Object(k.a)("".concat("sceneManagement","/SCENE_ADDED")),Qe=Object(C.a)((q={},Object(b.a)(q,We,(function(e){return Object(x.a)({},e,{isLoading:!0})})),Object(b.a)(q,Re,(function(e,t){var a=t.payload,n=a.scenes,c=void 0===n?{}:n,r=a.list,i=void 0===r?[]:r,o=a.error,s=void 0===o?"":o;return Object(x.a)({},e,{dictionary:s?{}:c,list:s?[]:i,isLoading:!1})})),Object(b.a)(q,Be,(function(e){return Object(x.a)({},e,{isProcessing:!0})})),Object(b.a)(q,Ve,(function(e,t){var a=t.payload,n=a.id,c=a.config,r=a.error,i=void 0===r?"":r,o=Object(x.a)({},e.dictionary,Object(b.a)({},n,{id:n,key:n,config:c}));return Object(x.a)({},e,{dictionary:i?{}:o,list:i?[]:Ge(o),isProcessing:!1})})),q),{isLoading:!1,isProcessing:!1,dictionary:{},list:[]});function Ue(){return function(){var e=Object(y.a)(O.a.mark((function e(t){var a,n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(We()),e.prev=1,e.next=4,w.get("/scenes");case 4:"OK"===(a=e.sent).statusText&&(n=a.data.scenes,c=Ge(n),t(Re({scenes:n,list:c}))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Error fetching scenes",e.t0.message),t(Re({error:e.t0.message}));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}function He(e){return function(){var t=Object(y.a)(O.a.mark((function t(a){var n,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Be()),t.prev=1,t.next=4,Me(e);case 4:n=t.sent,c=n.data,"OK"===n.statusText&&a(Ve(c.scene)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(" error updating sceen",t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}var Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){var a=e[t];return Object(x.a)({},a,{key:t,id:t,name:a.name})}))},Ke=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).handleUpdateDeviceEffect=function(t,a){var n=e.props,c=n.setDeviceEffect,r=n.clearDeviceEffect;a.active?c(t,a):r(t)},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.getScenes(),this.props.fetchDeviceList()}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.devices,c=t.scenes,i=t.addScene;return n.list.length?r.a.createElement("div",null,r.a.createElement(ve.a,{container:!0,direction:"row",spacing:4},n.list.map((function(t){return r.a.createElement(ve.a,{key:t.id,item:!0,lg:6},r.a.createElement(me.a,{className:a.card},r.a.createElement(fe.a,null,r.a.createElement(ve.a,{container:!0,direction:"row",spacing:1},r.a.createElement(ve.a,{item:!0,xs:12},r.a.createElement(we,{device:t,setDeviceEffect:e.handleUpdateDeviceEffect})),r.a.createElement(ve.a,{item:!0,xs:12},r.a.createElement(ye,{device:t}))))))}))),r.a.createElement(ve.a,{container:!0,direction:"row",spacing:4},r.a.createElement(ve.a,{item:!0,xs:12},r.a.createElement(Fe,{scenes:c,addScene:i})))):r.a.createElement(me.a,null,r.a.createElement(fe.a,null,r.a.createElement("p",null,"Looks like you have no devices! Go to 'Device Management' to add them")))}}]),a}(r.a.Component),qe=Object(s.c)((function(e){return{devices:e.devices,scenes:e.scenes}}),{addScene:He,getScenes:Ue,setDeviceEffect:function(e,t){return function(){var a=Object(y.a)(O.a.mark((function a(n,c){var r,i;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=c().devices.dictionary[e],a.prev=1,console.log(" wahat the devices here",r,t),n(W(Object(x.a)({id:e},r,{effect:Object(x.a)({},r.effect,{isProcessing:!0})}))),a.next=6,P(e,{type:t.type||"wavelength(Reactive)",config:t});case 6:i=a.sent,n(W({id:e,effect:Object(x.a)({},t,{},i.data.effect,{isProcessing:!1})})),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),W(Object(x.a)({id:e},r,{effect:Object(x.a)({},r.effect,{isProcessing:!1})}));case 13:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e,t){return a.apply(this,arguments)}}()},clearDeviceEffect:function(e){return function(){var t=Object(y.a)(O.a.mark((function t(a,n){var c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("clear device",e),c=n().devices.dictionary[e],t.prev=2,a(W(Object(x.a)({id:e},c,{effect:Object(x.a)({},c.effect,{isProcessing:!0})}))),t.next=6,I(e);case 6:t.sent,a(W({id:e,effect:Object(x.a)({},c.effect,{active:!1,isProcessing:!1})})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),W(Object(x.a)({id:e},c,{effect:Object(x.a)({},c.effect,{isProcessing:!1})}));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,a){return t.apply(this,arguments)}}()},fetchDeviceList:B})(g()((function(e){return{root:{flexGrow:1},card:{width:"100%",overflowX:"auto"},table:{width:"100%",maxWidth:"100%",backgroundColor:"transparent",borderSpacing:"0"}}}))(Ke)),Je=a(387),Xe=a.n(Je),Ze=a(4),Ye=a(620),_e=a(621),$e=a(618),et=a(619),tt=a(622),at=a(383),nt=a.n(at),ct=a(384),rt=a.n(ct),it=a(80),ot=a.n(it);var st=Object(Ze.a)((function(e){return{button:{margin:0,padding:0,minWidth:32},deleteButton:{minWidth:32,color:e.palette.getContrastText(ot.a[500]),backgroundColor:ot.a[500],"&:hover":{backgroundColor:ot.a[700]}},editButton:{minWidth:32},actions:{display:"flex","& > *":{marginLeft:e.spacing(1)}},deviceLink:{textDecoration:"none",color:"black","&:hover":{color:e.palette.primary.main}}}}))((function(e){var t=e.device,a=e.onDelete,n=e.classes,c=e.onEdit;return r.a.createElement($e.a,{key:t.id},r.a.createElement(et.a,{component:"th",scope:"row"},r.a.createElement(Ce.a,{to:"/devices/"+t.id,className:n.deviceLink,key:t.id},t.config.name)),r.a.createElement(et.a,null,t.config.ip_address),r.a.createElement(et.a,null,t.config.pixel_count),r.a.createElement(et.a,null,t.type),r.a.createElement(et.a,{className:n.actions,align:"right"},r.a.createElement(je.a,{variant:"contained",size:"small",className:n.deleteButton,onClick:function(){a(t.id)}},r.a.createElement(nt.a,{style:{fontSize:16}})),r.a.createElement(je.a,{variant:"contained",size:"small",className:n.editButton,onClick:function(){c(t)}},r.a.createElement(rt.a,{style:{fontSize:16}}))))}));var lt=Object(Ze.a)((function(e){return{table:{borderSpacing:"0",borderCollapse:"collapse"},tableResponsive:{overflowX:"auto"}}}))((function(e){var t=e.onDeleteDevice,a=e.classes,n=e.items,c=e.onEditDevice;return r.a.createElement("div",{className:a.tableResponsive},r.a.createElement(Ye.a,{className:a.table},r.a.createElement(_e.a,null,r.a.createElement($e.a,null,r.a.createElement(et.a,null,"Name"),r.a.createElement(et.a,null,"IP Address"),r.a.createElement(et.a,null,"Pixel Count"),r.a.createElement(et.a,null,"Type"),r.a.createElement(et.a,{align:"right"},"Manage"))),r.a.createElement(tt.a,null,n.map((function(e){return r.a.createElement(st,{key:e.id,device:e,onDelete:t,onEdit:c})})))))})),ut=a(628),dt=a(630),pt=a(632),mt=a(631),ft=a(87),vt=a(2),bt=a(629),ht=a(258),gt=a(386),Et=a.n(gt),Ot=a(271),yt=a(267),jt=a(369),xt=a(266),kt=Object(Se.a)((function(e){return{control:{margin:e.spacing(1),width:"100%"}}}));function Ct(e){var t=e.onChange,a=e.value,n=e.options,c=e.label,i=kt();return r.a.createElement(xt.a,{className:i.control},c&&r.a.createElement(yt.a,null,c),r.a.createElement(Ot.a,{value:a,onChange:function(e){var a=e.target.value;t&&t(a)}},r.a.createElement(jt.a,{value:"",select:"selected"},r.a.createElement(_.a,null,"None")),n.map((function(e){var t=e.display,a=e.value;return r.a.createElement(jt.a,{key:a,value:a},r.a.createElement(_.a,null,t))}))))}Ct.defaultProps={classes:"",options:[],value:""};var Dt=Ct,wt=a(626),At=Object(Se.a)((function(e){return{flexWrap:{display:"flex",flexWrap:"wrap"},schemaForm:{display:"flex",flexWrap:"wrap"}}}));function St(e){var t=e.form,a=e.model,n=e.schema,c=e.onChange,i=e.open,o=At();return r.a.createElement(wt.a,{in:i},r.a.createElement("div",{className:o.flexWrap},r.a.createElement(ft.SchemaForm,{className:o.schemaForm,schema:n,form:t,model:a,onModelChange:function(){c&&c.apply(void 0,arguments)}})))}St.defaultProps={classes:"",form:[],model:{},scheme:{}};var Nt=St,Pt=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleTypeChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.setState({collectionKey:e,model:t})},n.onModelChange=function(e,t){ft.utils.selectOrSet(e,n.state.model,t)},n.handleSubmit=function(e){e.preventDefault(),n.props.onSubmit&&n.props.onSubmit(n.state.collectionKey,n.state.model)},n.toggleShowAdditional=function(e){n.setState((function(e){return{additionalPropertiesOpen:!e.additionalPropertiesOpen}}))},n.state={collectionKey:"",model:{},additionalPropertiesOpen:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.selectedType,a=e.initial;t&&this.handleTypeChange(t,a)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.selectedType;t.initial===e.initial&&a===e.selectedType||(console.log("are the initial values chnGING",e.initial),this.handleTypeChange(e.selectedType,e.initial))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.schemaCollection,n=e.useAdditionalProperties,c=e.submitText,i=e.cancelText,o=e.onCancel,s=this.state,l=s.model,u=s.additionalPropertiesOpen,d=s.collectionKey,p=Object(x.a)({type:"object",title:"Configuration",properties:{}},d?a[d].schema:{}),m=p.required,f=Object.keys(p.properties).filter((function(e){return m&&-1===m.indexOf(e)})),v=!(!n||!f.length);return r.a.createElement("form",{onSubmit:this.handleSubmit,className:t.form},r.a.createElement(Dt,{label:"Type",value:d,options:Object.keys(a).map((function(e){return{value:e,display:e}})),onChange:this.handleTypeChange}),r.a.createElement(ft.SchemaForm,{className:t.schemaForm,schema:p,form:m,model:l,onModelChange:this.onModelChange}),v&&r.a.createElement(Nt,{schema:p,form:f,model:l,onChange:this.onModelChange,open:u}),r.a.createElement(bt.a,{className:t.bottomContainer},v&&r.a.createElement(je.a,{size:"medium",className:t.additionalButton,onClick:this.toggleShowAdditional},r.a.createElement(Et.a,{color:"disabled",className:Object(vt.a)(Object(b.a)({},t.expandIcon,u))}),"Show ".concat(u?"Less":"More")),r.a.createElement(ht.a,{flex:1,display:"flex",justifyContent:"flex-end",className:t.actionButtons},r.a.createElement(je.a,{className:t.button,onClick:o,color:"primary"},i||"Cancel"),r.a.createElement(je.a,{className:t.button,type:"submit",variant:"contained",color:"primary",disabled:!d},c||"Submit"))))}}]),a}(r.a.Component);Pt.defaultProps={classes:"",schemaCollection:{},selectedType:""};var Tt=g()((function(e){return{form:{display:"flex",flexWrap:"wrap"},schemaForm:{display:"flex",flexWrap:"wrap",width:"100%"},bottomContainer:{flex:1,marginTop:8},actionButtons:{"& > *":{marginLeft:e.spacing(2)}},expandIcon:{transform:"rotate(180deg)"}}}))(Pt),It=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).handleClose=function(){e.props.onClose()},e.handleSubmit=function(t,a){var n=e.props,c=n.initial,r=n.onAddDevice,i=n.onUpdateDevice;console.log("what the submit stuffs",t,a,c),c.id?i(t,a):r(t,a),e.props.onClose()},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.deviceTypes,n=e.open,c=e.initial;return r.a.createElement(ut.a,{onClose:this.handleClose,className:t.cardResponsive,"aria-labelledby":"form-dialog-title",disableBackdropClick:!0,open:n},r.a.createElement(pt.a,{id:"form-dialog-title"},"Add Device"),r.a.createElement(dt.a,{className:t.cardResponsive},r.a.createElement(mt.a,null,"To add a device to LedFx, please first select the type of device you wish to add then provide the necessary configuration."),r.a.createElement(Tt,{schemaCollection:a,onSubmit:this.handleSubmit,useAdditionalProperties:!0,onCancel:this.handleClose,selectedType:c.type,initial:c.config})))}}]),a}(r.a.Component),Ft=g()((function(e){return{}}))(It);It.defaultProps={deviceTypes:{}};var Mt=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).openAddDeviceDialog=function(){n.setState({selectedDevice:{},addDialogOpened:!0})},n.closeAddDeviceDialog=function(){n.setState({selectedDevice:{},addDialogOpened:!1})},n.handleEditDevice=function(e){n.setState({selectedDevice:e,addDialogOpened:!0})},n.state={addDialogOpened:!1,selectedDevice:{}},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.deviceList,n=e.schemas,c=e.addDevice,i=e.deleteDevice,o=e.updateDeviceConfig,s=this.state,l=s.addDialogOpened,u=s.selectedDevice;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.a,{container:!0,spacing:2},r.a.createElement(ve.a,{item:!0,xs:12,md:12},r.a.createElement(me.a,null,r.a.createElement(fe.a,null,r.a.createElement(lt,{items:a,onDeleteDevice:i,onEditDevice:this.handleEditDevice}))))),!n.isLoading&&r.a.createElement(r.a.Fragment,null,r.a.createElement(je.a,{variant:"contained",color:"primary","aria-label":"Add",className:t.button,onClick:this.openAddDeviceDialog},r.a.createElement(Xe.a,null)),r.a.createElement(Ft,{open:l,onClose:this.closeAddDeviceDialog,deviceTypes:n.deviceTypes,onAddDevice:c,initial:u,onUpdateDevice:o})))}}]),a}(r.a.Component),Lt=Object(s.c)((function(e){return{deviceList:e.devices.list,schemas:e.schemas}}),{addDevice:function(e,t){return function(){var a=Object(y.a)(O.a.mark((function a(n){var c;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c={type:e,config:t},a.prev=1,a.next=4,A(c);case 4:"OK"===a.sent.statusText&&n(B()),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log("Error adding device",a.t0.message);case 11:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()},deleteDevice:function(e){return function(){var t=Object(y.a)(O.a.mark((function t(a){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n=e,w.delete("/devices/".concat(n));case 3:"OK"===t.sent.statusText&&a(B()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error deleting device",t.t0.message);case 10:case"end":return t.stop()}var n}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},updateDeviceConfig:function(e,t){return function(){var a=Object(y.a)(O.a.mark((function a(n){return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c=t.name,r={config:Object(x.a)({},t,{type:e})},w.put("/devices/".concat(c),r);case 3:"OK"===a.sent.statusText&&n(B()),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("Error adding device",a.t0.message);case 10:case"end":return a.stop()}var c,r}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}})(g()((function(e){return{cardResponsive:{width:"100%",overflowX:"auto"},button:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)},dialogButton:{float:"right"}}}))(Mt)),zt=a(624),Wt=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.devices;return r.a.createElement(Ye.a,{className:t.table},r.a.createElement(_e.a,null,r.a.createElement($e.a,null,r.a.createElement(et.a,null,"Device"),r.a.createElement(et.a,null,"Effect"))),r.a.createElement(tt.a,null,Rt(a)))}}]),a}(r.a.Component),Rt=function(e){return Object.keys(e).filter((function(t){return!!e[t].type})).map((function(t){return r.a.createElement($e.a,{key:t},r.a.createElement(et.a,null,t),r.a.createElement(et.a,null,e[t].type))}))},Bt=Object(Ze.a)((function(e){return{table:{}}}))(Wt),Vt=Object(Se.a)((function(e){return{deleteButton:{color:e.palette.getContrastText(ot.a[500]),backgroundColor:ot.a[500],"&:hover":{backgroundColor:ot.a[700]},margin:e.spacing(1),float:"right"},button:{margin:e.spacing(1),float:"right"},submitControls:{flex:1,justifyContent:"flex-end"}}}));function Qt(e){var t=e.scene,a=e.activateScene,n=e.deleteScene,c=Vt();return r.a.createElement(me.a,null,r.a.createElement(fe.a,null,r.a.createElement("h3",null,t.name),t.devices&&r.a.createElement(Bt,{devices:t.devices})),r.a.createElement(zt.a,{className:c.submitControls},r.a.createElement(je.a,{className:c.button,color:"primary",size:"medium","aria-label":"Activate",variant:"contained",onClick:function(){a(t.id)}},"Activate"),r.a.createElement(je.a,{className:c.deleteButton,color:"secondary",size:"medium","aria-label":"Delete",variant:"contained",onClick:function(){n(t.id)}},"Delete")))}var Ut,Ht=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.getScenes()}},{key:"render",value:function(){var e=this.props,t=e.scenes,a=e.classes,n=e.deleteScene,c=e.activateScene;return r.a.createElement(ve.a,{container:!0,direction:"row",spacing:4},r.a.createElement(ve.a,{item:!0,xs:12},r.a.createElement(Fe,{scenes:t,addScene:He})),t.isLoading?r.a.createElement(ve.a,{container:!0,justify:"center",alignContent:"center",className:a.spinnerContainer},r.a.createElement(ke.a,{size:80})):t.list.map((function(e){return r.a.createElement(ve.a,{key:e.name,item:!0,xs:12,md:6},r.a.createElement(Qt,{key:e.id,scene:e,deleteScene:n,activateScene:c}))})))}}]),a}(r.a.Component),Gt=Object(s.c)((function(e){return{scenes:e.scenes}}),{getScenes:Ue,addScene:He,activateScene:function(e){return function(){var t=Object(y.a)(O.a.mark((function t(a){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ze(e);case 2:t.sent;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},deleteScene:function(e){return function(){var t=Object(y.a)(O.a.mark((function t(a){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Le(e);case 2:t.sent,a(Ue());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(g()((function(e){return{cardResponsive:{width:"100%",overflowX:"auto"},button:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)},dialogButton:{float:"right"},spinnerContainer:{height:"10rem"}}}))(Ht)),Kt=Object(k.a)("".concat("selectedDevice","/DEVICE_REQUESTED")),qt=Object(k.a)("".concat("selectedDevice","/DEVICE_RECEIVED")),Jt=Object(k.a)("".concat("selectedDevice","/DEVICE_EFFECT_REQUESTED")),Xt=Object(k.a)("".concat("selectedDevice","/DEVICE_EFFECT_RECEIVED")),Zt=Object(C.a)((Ut={},Object(b.a)(Ut,Kt,(function(e){return Object(x.a)({},e,{isDeviceLoading:!0})})),Object(b.a)(Ut,qt,(function(e,t){var a=t.payload;return Object(x.a)({},e,{isDeviceLoading:!1,device:a})})),Object(b.a)(Ut,Jt,(function(e){return Object(x.a)({},e,{isEffectLoading:!0})})),Object(b.a)(Ut,Xt,(function(e,t){var a=t.payload;return Object(x.a)({},e,{isEffectLoading:!1,effect:a})})),Ut),{isDeviceLoading:!1,device:null,isEffectLoading:!1,effect:null});var Yt,_t=a(400),$t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){var a=e[t];return Object(x.a)({},a,{id:t})}))},ea=Object(k.a)("".concat("sceneManagement","/PRESETS_FETCHING")),ta=Object(k.a)("".concat("sceneManagement","/PRESETS_FETCHED")),aa=Object(k.a)("".concat("sceneManagement","/PRESET_ADDING")),na=Object(k.a)("".concat("sceneManagement","/PRESET_ADDED")),ca=Object(C.a)((Yt={},Object(b.a)(Yt,ea,(function(e){return Object(x.a)({},e,{isLoading:!0})})),Object(b.a)(Yt,ta,(function(e,t){var a=t.payload,n=a.defaultPresets,c=void 0===n?[]:n,r=a.customPresets,i=void 0===r?[]:r,o=a.effectType,s=a.error,l=void 0===s?"":s;return Object(x.a)({},e,{defaultPresets:l?{}:c,customPresets:l?[]:i,effectType:o,isLoading:!1})})),Object(b.a)(Yt,aa,(function(e){return Object(x.a)({},e,{isProcessing:!0})})),Object(b.a)(Yt,na,(function(e,t){var a=t.payload,n=a.id,c=a.config,r=a.error,i=void 0===r?"":r,o=[].concat(Object(_t.a)(e.customPresets),[{id:n,key:n,config:c}]);return Object(x.a)({},e,{customPresets:i?e.customPresets:o,isProcessing:!1})})),Yt),{isLoading:!1,isProcessing:!1,defaultPresets:[],customPresets:[],effectType:""});var ra,ia=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleTypeChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log("whats the value and inital in handle change",e,t),n.setState({selectedType:e,model:t})},n.onModelChange=function(e,t){var a=ft.utils.selectOrSet(e,n.state.model,t);console.log("whats this thingy here yo",a),n.setState({model:a})},n.handleSubmit=function(e){var t=n.props,a=t.onSubmit,c=t.device,r=n.state,i=r.selectedType,o=r.model;e.preventDefault(),a&&a({deviceId:c.id,type:i,config:o})},n.handleRandomize=function(e){var t=n.props,a=t.onSubmit,c=t.device,r=n.state.selectedType;e.preventDefault(),a&&a({deviceId:c.id,type:r,config:"RANDOMIZE"})},n.handleClearEffect=function(){var e=n.props;(0,e.onClear)(e.device.id)},n.state={selectedType:"",model:{}},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.effect;console.log("is there an effect on mount",e),e.type&&this.handleTypeChange(null===e||void 0===e?void 0:e.type,e.config)}},{key:"componentDidUpdate",value:function(e){var t,a,n=this.props,c=n.effect;n.initial;(null===c||void 0===c?void 0:c.type)===(null===(t=e.effect)||void 0===t?void 0:t.type)&&(null===c||void 0===c?void 0:c.config)===(null===(a=e.effect)||void 0===a?void 0:a.config)||(console.log("are the initial values chnGING",e.effect),this.handleTypeChange(e.effect.type,e.effect.config))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.schemas,n=(e.effect,this.state),c=n.model,i=n.selectedType,o=Object(x.a)({type:"object",title:"Configuration",properties:{}},i?a.effects[i].schema:{}),s=Object.keys(o.properties);return a.effects?r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{variant:"h5",color:"inherit"},"Effect Control"),r.a.createElement("form",{onSubmit:this.handleSubmit,className:t.form},r.a.createElement(Dt,{label:"Type",value:i,options:Object.keys(null===a||void 0===a?void 0:a.effects).map((function(e){return{value:e,display:e}})),onChange:this.handleTypeChange}),r.a.createElement(ft.SchemaForm,{className:t.schemaForm,schema:o,form:s,model:c,onModelChange:this.onModelChange}),r.a.createElement(bt.a,{className:t.bottomContainer},r.a.createElement(je.a,{onClick:this.handleRandomize},"Randomize"),r.a.createElement(ht.a,{flex:1,display:"flex",justifyContent:"flex-end",className:t.actionButtons},r.a.createElement(je.a,{className:t.button,onClick:this.handleClearEffect,color:"primary"},"Clear Effect"),r.a.createElement(je.a,{className:t.button,type:"submit",variant:"contained",color:"primary",disabled:!i},"Set Effect"))))):r.a.createElement("p",null,"Loading")}}]),a}(r.a.Component),oa=g()((function(e){return{form:{display:"flex",flexWrap:"wrap"},schemaForm:{display:"flex",flexWrap:"wrap",width:"100%"},bottomContainer:{flex:1,marginTop:8},actionButtons:{"& > *":{marginLeft:e.spacing(2)}},expandIcon:{transform:"rotate(180deg)"}}}))(ia),sa=a(625),la=Object(Se.a)((function(e){return{presetButton:{size:"large",margin:e.spacing(1),textDecoration:"none","&,&:hover":{color:"#000000"}},content:{display:"flex",flexDirection:"column",width:"100%"},actions:{display:"flex",flexDirection:"row",padding:e.spacing(1)},buttonGrid:{direction:"row",justify:"flex-start",alignItems:"baseline"}}})),ua=function(e,t){return!!(t&&t.customPresets&&t.defaultPresets)&&Object.keys(t.customPresets).concat(Object.keys(t.defaultPresets)).includes(e)},da=function(e,t){return!!(t&&t.customPresets&&t.defaultPresets)&&(Object.keys(t.customPresets).concat(Object.keys(t.defaultPresets)).includes(e)||""===e)},pa=function(e){var t=e.device,a=e.presets,n=e.activatePreset,i=e.getDevicePresets,o=e.addPreset,s=la(),l=Object(c.useState)(""),u=Object(Ae.a)(l,2),d=u[0],p=u[1];Object(c.useEffect)((function(){i(t.id)}),[t.id,i]);var m=function(e,c){return(null===e||void 0===e?void 0:e.length)?e.map((function(e){return r.a.createElement(ve.a,{item:!0,key:e.id},r.a.createElement(je.a,{className:s.presetButton,onClick:(i=t.id,o=c,l=a.effectType,u=e.id,function(){n(i,o,l,u)})},e.name));var i,o,l,u})):r.a.createElement(je.a,{className:s.presetButton,disabled:!0},"No Presets Found")};return r.a.createElement(me.a,{variant:"outlined"},r.a.createElement(sa.a,{title:"Presets",subheader:"Explore different effect configurations"}),r.a.createElement(fe.a,{className:s.content},r.a.createElement(_.a,{variant:"subtitle2"},"Default"),r.a.createElement(ve.a,{container:!0,className:s.buttonGrid},m(null===a||void 0===a?void 0:a.defaultPresets,"default_presets")),r.a.createElement(_.a,{variant:"subtitle2"},"Custom"),r.a.createElement(ve.a,{container:!0,className:s.buttonGrid},m(null===a||void 0===a?void 0:a.customPresets,"custom_presets")),r.a.createElement(_.a,{variant:"subtitle2"},"Add Preset"),r.a.createElement(_.a,{variant:"subtitle1",color:"textSecondary"},"Save this effect configuration as a preset")),r.a.createElement(zt.a,{className:s.actions},r.a.createElement(Ne.a,{error:ua(d,a),id:"presetNameInput",label:"Preset Name",onChange:function(e){return p(e.target.value)}}),r.a.createElement(je.a,{className:s.presetButton,color:"primary",size:"small","aria-label":"Save",disabled:da(d,a),variant:"contained",onClick:function(){return o(d,t.id)}},"Save")))},ma=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).handleLoadDevice=function(t){(0,e.props.loadDeviceInfo)(t)},e.handleClearEffect=function(t){(0,e.props.clearDeviceEffect)(t)},e.handleSetEffect=function(t){var a=e.props.setDeviceEffect;console.log("handle submite devcice data",t),a(t.deviceId,t)},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.deviceId;this.handleLoadDevice(e)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.match.params.deviceId,a=e.match.params.deviceId;t!==a&&this.handleLoadDevice(a)}},{key:"render",value:function(){var e=this.props,t=e.presets,a=e.schemas,n=e.selectedDevice,c=e.activatePreset,i=e.getDevicePresets,o=e.addPreset,s=n.device,l=n.effect,u=n.isDeviceLoading,d=n.isEffectLoading;return a.isLoading||u||d||!s||!l?r.a.createElement("p",null,"Loading"):r.a.createElement(ve.a,{container:!0,direction:"row",spacing:4},fa(s,l),r.a.createElement(ve.a,{item:!0,xs:6},r.a.createElement(me.a,null,r.a.createElement(fe.a,null,r.a.createElement(oa,{device:s,effect:l,schemas:a,onClear:this.handleClearEffect,onSubmit:this.handleSetEffect})))),r.a.createElement(ve.a,{item:!0,xs:6},l.type&&r.a.createElement(pa,{device:s,presets:t,activatePreset:c,getDevicePresets:i,addPreset:o})))}}]),a}(r.a.Component),fa=function(e,t){if(e&&(null===t||void 0===t?void 0:t.name))return r.a.createElement(ve.a,{item:!0,xs:12},r.a.createElement(me.a,null,r.a.createElement(fe.a,null,r.a.createElement(ye,{device:e}))))},va=Object(s.c)((function(e){return{schemas:e.schemas,selectedDevice:e.selectedDevice,presets:e.presets}}),{loadDeviceInfo:function(e){return function(){var t=Object(y.a)(O.a.mark((function t(a,n){var c,r,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=n().devices.dictionary,a(Kt()),t.next=5,S(e);case 5:return c=t.sent,a(qt(c)),a(Jt()),t.next=10,N(e);case 10:r=t.sent,i=r.data.effect,a(Xt(i)),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,a){return t.apply(this,arguments)}}()},clearDeviceEffect:function(e){return function(){var t=Object(y.a)(O.a.mark((function t(a){var n,c,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I(e);case 2:if(n=t.sent,c=n.statusText,r=n.data.effect,"OK"===c){t.next=7;break}throw new Error("Error Clearing Device:".concat(e," Effect"));case 7:a(Xt(r));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setDeviceEffect:function(e,t){var a=t.type,n=t.config;return function(){var t=Object(y.a)(O.a.mark((function t(c,r){var i,o,s,l,u;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r().selectedDevice.effect,o=i.type?T:P,t.prev=2,t.next=5,o(e,{type:a,config:n});case 5:if(s=t.sent,l=s.statusText,u=s.data.effect,"OK"===l){t.next=10;break}throw new Error("Error Clearing Device:".concat(e," Effect"));case 10:console.log("effect response",u),c(Xt(u)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),console.log("what the error for set effect",t.t0.message);case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e,a){return t.apply(this,arguments)}}()},activatePreset:function(e,t,a,n){return function(){var c=Object(y.a)(O.a.mark((function c(r){var i,o,s;return O.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return i={category:t,effect_id:a,preset_id:n},c.next=3,M(e,i);case 3:o=c.sent,s=o.data,"OK"===o.statusText&&r(r(Xt(s.effect)));case 7:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()},getDevicePresets:function(e){return function(){var t=Object(y.a)(O.a.mark((function t(a){var n,c,r,i,o,s,l;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(ea()),t.prev=1,t.next=4,F(e);case 4:"OK"===(n=t.sent).statusText&&(c=n.data,r=c.default_presets,i=c.custom_presets,o=c.effect,s=$t(r),l=$t(i),a(ta({defaultPresets:s,customPresets:l,effectType:o}))),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("Error fetching scenes",t.t0.message),a(ta({error:t.t0.message}));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},addPreset:function(e,t){return function(){var a=Object(y.a)(O.a.mark((function a(n){var c,r;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(aa()),a.prev=1,a.next=4,M(e,t);case 4:c=a.sent,r=c.data,"OK"===c.statusText&&n(na(r.preset)),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),console.log(" error updating preset",a.t0);case 13:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}()}})(ma);var ba=Object(k.a)("".concat("settings","/AUDIO_DEVICES_FETCHING")),ha=Object(k.a)("".concat("settings","/AUDIO_DEVICES_FETCHED")),ga=Object(k.a)("".concat("settings","/AUDIO_DEVICES_SAVED")),Ea=Object(k.a)("".concat("settings","/AUDIO_DEVICES_SAVING")),Oa=Object(C.a)((ra={},Object(b.a)(ra,ba,(function(e){return Object(x.a)({},e,{audioInputs:Object(x.a)({},e.audioInputs,{isLoading:!0})})})),Object(b.a)(ra,ha,(function(e,t){var a=t.payload,n=a.options,c=void 0===n?[]:n,r=a.value,i=void 0===r?"":r,o=a.error,s=void 0===o?"":o;return Object(x.a)({},e,{audioInputs:Object(x.a)({},e.audioInputs,{isLoading:!1,options:s?[]:c,value:s?"":i,error:s})})})),Object(b.a)(ra,Ea,(function(e){return Object(x.a)({},e,{audioInputs:Object(x.a)({},e.audioInputs,{isSaving:!0})})})),Object(b.a)(ra,ga,(function(e,t){var a=t.payload,n=a.value,c=void 0===n?"":n,r=a.error,i=void 0===r?"":r;return Object(x.a)({},e,{audioInputs:Object(x.a)({},e.audioInputs,{value:i?"":c,isSaving:!1,error:i})})})),ra),{audioInputs:{isLoading:!1,options:[],isSaving:!1,value:"",error:""}});var ya=function(e){return Object.keys(e).map((function(t){return{index:t,value:e[t]}}))},ja=a(269),xa=Object(Se.a)({form:{display:"flex"}}),ka=function(e){var t=e.options,a=e.value,n=e.onChange,c=e.error,i=e.isSaving,o=e.isLoading,s=xa();return r.a.createElement(me.a,null,r.a.createElement(fe.a,null,r.a.createElement(_.a,{variant:"h6",color:"textSecondary",gutterBottom:!0},"Audio Input"),r.a.createElement(xt.a,{error:!!c,className:s.form,disabled:o||i},r.a.createElement(yt.a,{id:"audio-input-select-label"},"Current Device"),r.a.createElement(Ot.a,{labelId:"audio-input-select-label",id:"audio-input-select",value:a,onChange:function(e){var a=e.target.value,c=t.find((function(e){return e.value===a}))||{};n(c)}},t.map((function(e){var t=e.index,a=e.value;return r.a.createElement(jt.a,{key:t,value:a},a)}))),r.a.createElement(ja.a,null,c))))},Ca=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.getAudioInputs()}},{key:"render",value:function(){var e=this.props,t=e.setAudioInput,a=e.settings.audioInputs;return r.a.createElement(ve.a,{container:!0,direction:"row",spacing:4},r.a.createElement(ve.a,{item:!0,md:4},r.a.createElement(ka,Object.assign({},a,{onChange:t}))))}}]),a}(c.Component),Da=Object(s.c)((function(e){return{settings:e.settings}}),{getAudioInputs:function(){return function(){var e=Object(y.a)(O.a.mark((function e(t){var a,n,c,r,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ba()),e.prev=1,e.next=4,w.get("/audio/devices");case 4:if("OK"===(a=e.sent).statusText){e.next=7;break}throw new Error("Error fetching audio Inputs");case 7:n=a.data,c=n.devices,r=n.active_device_index,i=ya(c),o=c[r],t(ha({options:i,value:o})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log("Error fetching audio devices",e.t0.message),t(ha({error:e.t0.message}));case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()},setAudioInput:function(e){var t=e.value,a=e.index;return function(){var e=Object(y.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(Ea()),e.next=4,c={index:parseInt(a)},w.put("/audio/devices",c);case 4:if("OK"===e.sent.statusText){e.next=7;break}throw new Error("Audio Input failed to update");case 7:n(ga({value:t})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),n(ga({error:e.t0.message}));case 13:case"end":return e.stop()}var c}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()}})(Object(Ze.a)((function(e){return{}}))(Ca)),wa=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleMessage=function(e){var t=n.state.chartData,a=JSON.parse(e.data);t.labels=a.frequencies,t.datasets[0].data=a.melbank;var c=Math.max.apply(Math,a.melbank),r=n.state.chartOptions;r.scales.yAxes[0].ticks.min=0,r.scales.yAxes[0].ticks.max=Math.max(r.scales.yAxes[0].ticks.max,c),r.scales.yAxes[0].ticks.stepSize=r.scales.yAxes[0].ticks.max/4,n.setState({chartData:t,chartOptions:r})},n.handleOpen=function(e){n.enablePixelVisualization()},n.handleClose=function(e){},n.enablePixelVisualization=function(){n.state.ws.json({id:n.websocketPacketId,type:"subscribe_event",event_type:"graph_update",event_filter:{graph_id:n.props.graphId}}),n.deviceUpdateSubscription=n.websocketPacketId,n.websocketPacketId++},n.disablePixelVisualization=function(){n.state.ws.json({id:n.websocketPacketId,type:"unsubscribe_event",subscription_id:n.deviceUpdateSubscription}),n.deviceUpdateSubscription=null,n.websocketPacketId++},n.connectWebsocket=function(){var e=Ee({timeout:5e3,maxAttempts:10,onopen:n.handleOpen,onmessage:n.handleMessage,onclose:n.handleClose,onerror:function(e){return console.log("WebSocket Error:",e)}});n.setState({ws:e})},n.disconnectWebsocket=function(){void 0!==n.state.ws&&(n.state.ws.close(1e3),n.setState({ws:void 0}))},n.websocketPacketId=1,n.deviceUpdateSubscription=null,n.state={chartData:{labels:[],datasets:[{label:"Melbank",lineTension:.1,backgroundColor:"rgba(0,0,0,0.1)",borderColor:"rgba(0,0,0,1)",pointRadius:0,data:[]}]},chartOptions:{responsive:!0,maintainAspectRatio:!1,tooltips:{enabled:!1},hover:{animationDuration:0,mode:null},animation:{duration:0},responsiveAnimationDuration:0,scales:{xAxes:[{gridLines:{display:!1},ticks:{maxTicksLimit:7,callback:function(e,t,a){return e+" Hz"}}}],yAxes:[{ticks:{min:0,max:2,stepSize:.5},gridLines:{color:"rgba(0, 0, 0, .125)"}}]},legend:{display:!1}}},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.connectWebsocket()}},{key:"componentWillUnmount",value:function(){this.disconnectWebsocket()}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(me.a,null,r.a.createElement(fe.a,{className:e.content},r.a.createElement(be.a,{data:this.state.chartData,options:this.state.chartOptions})))}}]),a}(r.a.Component),Aa=g()((function(e){return{content:{minWidth:120,maxWidth:"100%"}}}))(wa),Sa=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.match.params.graphString.split("+"),t=Object.keys(e).map((function(t){return r.a.createElement(ve.a,{item:!0,xs:12},r.a.createElement("p",null,e[t].replace(/^\w/,(function(e){return e.toUpperCase()}))," Graph"),r.a.createElement(Aa,{key:t,graphId:e[t]}))}));return r.a.createElement(ve.a,{container:!0,spacing:3},t)}}]),a}(r.a.Component),Na=[{path:"/dashboard",sidebarName:"Dashboard",navbarName:"Dashboard",icon:ae.a,component:qe},{path:"/devices/:deviceId",navbarName:"Devices",sidebarName:"Devices",icon:ce.a,component:va},{path:"/scenes",sidebarName:"Scenes Management",navbarName:"Scenes Management",icon:ue.a,component:Gt},{path:"/devices",sidebarName:"Device Management",navbarName:"Device Management",icon:ie.a,component:Lt},{path:"/settings",sidebarName:"Settings",navbarName:"Settings",icon:pe.a,component:Da},{path:"/developer/:graphString",navbarName:"Developer",component:Sa},{path:"/developer/melbank",sidebarName:"Developer",navbarName:"Developer",icon:se.a,component:Sa},{redirect:!0,path:"/",to:"/dashboard",navbarName:"Redirect"}],Pa=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"getPageName",value:function(){var e,t=this.props,a=t.location,n=t.devicesDictionary,c=a.pathname,r=null===(e=Na.find((function(e,t){return e.path===c})))||void 0===e?void 0:e.navbarName;if(!r)if(c.startsWith("/devices/")){var i=c.replace("/devices/","");r="Devices / "+(void 0!==n[i]?n[i].config.name:"")}else c.startsWith("/developer/")&&(r="Developer / Custom");return r}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(J.a,{className:e.appBar},r.a.createElement(X.a,null,r.a.createElement(_.a,{variant:"h2",color:"inherit",className:e.flex},this.getPageName()),r.a.createElement(Y.a,{mdUp:!0},r.a.createElement(Z.a,{color:"inherit","aria-label":"open drawer",onClick:this.props.handleDrawerToggle},r.a.createElement(ee.a,null)))))}}]),a}(r.a.Component),Ta=g()((function(e){return{appBar:Object(b.a)({backgroundColor:e.palette.background.default,boxShadow:"1px 1px 5px rgba(0,0,0,0.3)",position:"absolute",marginLeft:260},e.breakpoints.up("md"),{width:"calc(100% - ".concat(260,"px)")}),flex:{flex:1,fontSize:18,fontWeight:300}}}))(Pa),Ia=a(60),Fa=a(601),Ma=a(602),La=a(633),za=a(634);var Wa=a(395),Ra=a.n(Wa),Ba=function(e){return{drawerPaper:Object(b.a)({width:260},e.breakpoints.up("md"),{width:260,position:"fixed",height:"100%"}),logo:{position:"relative",padding:"15px 15px",zIndex:"4","&:after":{content:'""',position:"absolute",bottom:"0",height:"1px",right:"15px",width:"calc(100% - 30px)",backgroundColor:"rgba(180, 180, 180, 0.3)"}},logoLink:{padding:"5px 0",display:"block",fontSize:"18px",textAlign:"left",fontWeight:"400",lineHeight:"30px",textDecoration:"none",backgroundColor:"transparent","&,&:hover":{color:"#FFFFFF"}},logoImage:{width:"30px",display:"inline-block",maxHeight:"30px",marginLeft:"10px",marginRight:"15px"},img:{width:"35px",top:"17px",position:"absolute",verticalAlign:"middle",border:"0"},background:{position:"absolute",zIndex:"1",height:"100%",width:"100%",display:"block",top:"0",left:"0",backgroundSize:"cover",backgroundPosition:"center center","&:after":{position:"absolute",zIndex:"3",width:"100%",height:"100%",content:'""',display:"block",background:"#000",opacity:".8"}},list:{marginTop:"20px",paddingLeft:"0",paddingTop:"0",paddingBottom:"0",marginBottom:"0",listStyle:"none",position:"unset"},item:{position:"relative",display:"block",textDecoration:"none","&:hover,&:focus,&:visited,&":{color:"#FFFFFF"}},itemLink:{width:"auto",transition:"all 300ms linear",margin:"10px 15px 0",borderRadius:"3px",position:"relative",display:"block",padding:"10px 15px",backgroundColor:"transparent"},itemIcon:{width:"24px",minWidth:"24px",height:"30px",float:"left",marginRight:"15px",textAlign:"center",verticalAlign:"middle",color:"rgba(255, 255, 255, 0.8)"},itemText:{margin:"0",lineHeight:"30px",fontSize:"14px",fontWeight:300,color:"#FFFFFF"},devicesItemText:{margin:"0",marginLeft:"10px",lineHeight:"30px",fontSize:"14px",fontWeight:300,color:"#FFFFFF",textDecoration:"none"},activeView:{backgroundColor:[e.palette.primary.main],boxShadow:[e.shadows[12]],"&:hover,&:focus,&:visited,&":{backgroundColor:[e.palette.primary.main],boxShadow:[e.shadows[12]]},color:"#FFFFFF"},sidebarWrapper:{position:"relative",height:"calc(100vh - 70px)",overflow:"auto",zIndex:"4",overflowScrolling:"touch"}}},Va=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={devMode:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;w.get("/config").then((function(e){return e.data.config})).then((function(t){e.setState({devMode:t.dev_mode})}))}},{key:"isViewActive",value:function(e){return this.props.location.pathname===e}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.devicesDictionary,c=t.effectLinks,i=Object.keys(n).map((function(t){var c=a.itemLink,i=n[t];return e.isViewActive("/devices/".concat(t))&&(c="listItemClass ".concat(a.activeView)),r.a.createElement(Ce.a,{to:"/devices/".concat(i.id),className:a.item,key:i.id,activeClassName:"active"},r.a.createElement(Ma.a,{button:!0,className:c},r.a.createElement(za.a,{primary:i.config.name,className:a.devicesItemText,disableTypography:!0})))})),o=r.a.createElement(Fa.a,{className:a.list},Na.map((function(t,n){if(t.redirect||!t.sidebarName)return null;if("Developer"===t.sidebarName&&!e.state.devMode)return null;var o=a.itemLink;return e.isViewActive(t.path)&&"Devices"!==t.sidebarName&&(o=o+" "+a.activeView),e.isViewActive(t.path)&&"EffectPresets"!==t.sidebarName&&(o=o+" "+a.activeView),"Devices"===t.sidebarName?r.a.createElement(Ma.a,{button:!0,className:o,key:t.sidebarName},r.a.createElement(La.a,{className:a.itemIcon},r.a.createElement(t.icon,null)),r.a.createElement(za.a,{primary:t.sidebarName,className:a.itemText,disableTypography:!0}),r.a.createElement(Fa.a,{className:a.list},i)):"EffectPresets"===t.sidebarName?r.a.createElement(Ma.a,{button:!0,className:o},r.a.createElement(La.a,{className:a.itemIcon},r.a.createElement(t.icon,null)),r.a.createElement(za.a,{primary:t.sidebarName,className:a.itemText,disableTypography:!0}),r.a.createElement(Fa.a,{className:a.list},c)):r.a.createElement(Ce.a,{to:t.path,className:a.item,activeClassName:"active",key:n},r.a.createElement(Ma.a,{button:!0,className:o},r.a.createElement(La.a,{className:a.itemIcon},r.a.createElement(t.icon,null)),r.a.createElement(za.a,{primary:t.sidebarName,className:a.itemText,disableTypography:!0})))}))),s=r.a.createElement("div",{className:a.logo},r.a.createElement("a",{href:"/#",className:a.logoLink},r.a.createElement("div",{className:a.logoImage},r.a.createElement("img",{src:Ra.a,alt:"logo",className:a.img})),"LedFx"));return r.a.createElement("div",null,r.a.createElement(Y.a,{mdUp:!0},r.a.createElement(Ia.a,{variant:"temporary",anchor:"right",open:this.props.open,classes:{paper:a.drawerPaper},onClose:this.props.handleDrawerToggle,ModalProps:{keepMounted:!0}},s,r.a.createElement("div",{className:a.sidebarWrapper},o),r.a.createElement("div",{className:a.background}))),r.a.createElement(Y.a,{smDown:!0,implementation:"css"},r.a.createElement(Ia.a,{open:!0,variant:"permanent",classes:{paper:a.drawerPaper}},s,r.a.createElement("div",{className:a.sidebarWrapper},o),r.a.createElement("div",{className:a.background}))))}}]),a}(r.a.Component),Qa=g()(Ba)(Va),Ua=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).setRootRef=function(e){n.root=e},n.handleDrawerToggle=function(){n.setState((function(e){return{mobileOpen:!e.mobileOpen}}))},n.state={mobileOpen:!1},n.root=Object(c.createRef)(),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchDeviceList(),this.props.fetchSchemas()}},{key:"componentDidUpdate",value:function(e){e.history.location.pathname!==e.location.pathname&&(this.root.scrollTo({top:0,behavior:"smooth"}),this.state.mobileOpen&&this.setState({mobileOpen:!1}))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.deviceDictionary;return r.a.createElement("div",{className:t.root,ref:this.setRootRef},r.a.createElement(Ta,{handleDrawerToggle:this.handleDrawerToggle,location:this.props.location,devicesDictionary:a}),r.a.createElement(Qa,{handleDrawerToggle:this.handleDrawerToggle,open:this.state.mobileOpen,location:this.props.location,devicesDictionary:a}),r.a.createElement("div",{className:t.content},r.a.createElement("div",{className:t.toolbar}),r.a.createElement(l.d,null,Na.map((function(e,t){var a=e.redirect,n=e.path,c=e.to,i=e.component;return a?r.a.createElement(l.a,{from:n,to:c,key:t}):r.a.createElement(l.b,{exact:!0,path:n,key:t,render:function(e){return r.a.createElement(i,e)}})})))))}}]),a}(r.a.Component),Ha=[{path:"/",component:Object(s.c)((function(e){return{deviceDictionary:e.devices.dictionary,schemas:e.schemas}}),{fetchDeviceList:B,fetchSchemas:function(){return function(){var e=Object(y.a)(O.a.mark((function e(t){var a,n,c,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(U()),e.prev=1,e.next=4,w.get("/schema");case 4:"OK"===(a=e.sent).statusText&&(n=a.data,c=n.devices,r=n.effects,t(H({deviceTypes:c,effects:r}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Error fetching schemas",e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}})(g()((function(e){var t;return{root:{overflow:"hidden",display:"flex",width:"100%",height:"100%"},content:(t={flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3),minWidth:200},Object(b.a)(t,e.breakpoints.up("md"),{marginLeft:260}),Object(b.a)(t,"overflowY","auto"),t),toolbar:e.mixins.toolbar}}))(Ua))}],Ga=a(396),Ka=a(90),qa=a(397),Ja=a(399),Xa=a(373),Za=a(48),Ya={devices:R,presets:ca,schemas:K,scenes:Qe,settings:Oa,selectedDevice:Zt},_a=Object(Za.a)(),$a=a(109),en=a(398),tn=a.n(en),an=a(261),nn=a.n(an),cn=Object($a.a)({palette:{primary:tn.a,secondary:nn.a},overrides:{MuiFormControl:{root:{margin:8,minWidth:225,flex:"1 0 30%"}}}}),rn=(a(591),Object(Ka.createStore)(Object(Ka.combineReducers)(Object(x.a)({},Ya,{router:Object(Ja.a)(_a)})),Object(qa.composeWithDevTools)(Object(Ka.applyMiddleware)(Object(Xa.a)(_a),Ga.a))));function on(){return r.a.createElement(s.a,{store:rn},r.a.createElement(d.a,null),r.a.createElement(u.a,{theme:cn},r.a.createElement(l.c,{history:_a},r.a.createElement(l.d,null,Ha.map((function(e,t){var a=e.component,n=e.path;return r.a.createElement(l.b,{path:n,key:t,render:function(e){return r.a.createElement(a,e)}})}))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(on,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[409,1,2]]]);
//# sourceMappingURL=main.5dbf3776.chunk.js.map