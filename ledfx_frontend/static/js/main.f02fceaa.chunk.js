(this.webpackJsonpLedFx=this.webpackJsonpLedFx||[]).push([[0],{263:function(e,t){e.exports="data:image/png;base64,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"},396:function(e,t,a){e.exports=a(578)},401:function(e,t,a){},576:function(e,t,a){},578:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(17),r=a.n(c),o=(a(401),a(19)),s=a(373),l=a(85),u=a(83),d=a(621),p=a(620),m=a(388),h=a(26),f=a(34),v=a(33),b=a.n(v),E="http://localhost:8888/api";function g(e){return{type:"RECEIVE_DEVICE_ENTRY",device:e.device,delete:e.delete,receivedAt:Date.now()}}function y(e,t){return function(a){var n={type:e,config:t};b()("".concat(E,"/devices"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){return a(g(e))}))}}function A(e){var t={delete:!0,device:{id:e}};return function(a){b()("".concat(E,"/devices/").concat(e),{method:"DELETE"}).then((function(e){return a(g(t))}))}}function O(){return function(e){return e({type:"REQUEST_DEVICE_LIST"}),b()("".concat(E,"/devices")).then((function(e){return e.json()})).then((function(t){return e(function(e){return{type:"RECEIVE_DEVICE_LIST",devices:e.devices,receivedAt:Date.now()}}(t))}))}}function j(e,t,a){return function(n){t?b()("".concat(E,"/devices/").concat(e,"/effects"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({type:t,config:a})}).then((function(e){return e.json()})).then((function(t){return n(C(e,t))})):b()("".concat(E,"/devices/").concat(e,"/effects"),{method:"DELETE"}).then((function(e){return e.json()})).then((function(t){return n(C(e,t))}))}}function C(e,t){return{type:"RECEIVE_DEVICE_EFFECT_UPDATE",deviceId:e,effect:t.effect,receivedAt:Date.now()}}function k(){return function(e){return e({type:"REQUEST_SCHEMAS"}),b()("".concat("http://127.0.0.1:8888/api","/schema")).then((function(e){return e.json()})).then((function(t){return e(function(e){return{type:"RECEIVE_SCHEMAS",schemas:e,receivedAt:Date.now()}}(t))}))}}function w(){return function(e,t){if(a=t(),0===Object.keys(a.schemas).length)return e(k());var a}}var x="http://localhost:8888/api";function D(){return function(e){b()("".concat(x,"/presets"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return e({type:"GET_PRESETS",presets:t.presets,receivedAt:Date.now()})}))}}function N(){return function(e){fetch("".concat("http://127.0.0.1:8888/api","/audio/devices"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return e({type:"GET_AUDIO_INPUTS",audioDevices:t,receivedAt:Date.now()})}))}}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,didInvalidate:!1,config:{},effects:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INVALIDATE_DEVICE":return Object(f.a)(Object(f.a)({},e),{},{didInvalidate:!0});case"REQUEST_DEVICE_UPDATE":return Object(f.a)(Object(f.a)({},e),{},{isFetching:!0,didInvalidate:!1});case"RECEIVE_DEVICE_UPDATE":return Object(f.a)(Object(f.a)({},e),{},{isFetching:!1,didInvalidate:!1,config:t.config,lastUpdated:t.receivedAt});case"RECEIVE_DEVICE_EFFECT_UPDATE":return Object(f.a)(Object(f.a)({},e),{},{effect:t.effect,lastUpdated:t.receivedAt});default:return e}}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_DEVICE_LIST":return e;case"RECEIVE_DEVICE_LIST":return Object.assign({},e,t.devices);case"RECEIVE_DEVICE_ENTRY":if(t.delete){var a=e;return delete a[t.device.id],a}var n=e;return n[t.device.id]=t.device,n;default:return e}}var T=Object(u.c)({devicesById:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INVALIDATE_DEVICE":case"REQUEST_DEVICE_UPDATE":case"RECEIVE_DEVICE_UPDATE":case"RECEIVE_DEVICE_EFFECT_UPDATE":return Object.assign({},e,Object(h.a)({},t.deviceId,S(e[t.deviceId],t)));case"REQUEST_DEVICE_LIST":case"RECEIVE_DEVICE_LIST":case"RECEIVE_DEVICE_ENTRY":return Object.assign({},e,I(e,t));default:return e}},schemas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_SCHEMAS":return Object.assign({},e,t.schemas);default:return e}},presets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PRESETS":return t.presets;default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case"GET_AUDIO_INPUTS":var a=t.audioDevices;return Object(f.a)(Object(f.a)({},e),{},{audioDevices:a});default:return e}}}),F=a(12),P=a(13),M=a(15),V=a(14),R=a(617),B=a(104),L=a(596),z=a(387),W=a.n(z),U=a(255),Q=a.n(U),H=a(609),_=a(24),G=a.n(_),K=(a(233),a(607)),J=a(616),q=a(256),X=a(618),Y=a(76),Z=a(386),$=a.n(Z),ee=function(e){return{appBar:Object(h.a)({backgroundColor:"transparent",boxShadow:"none",position:"absolute",marginLeft:260},e.breakpoints.up("md"),{width:"calc(100% - ".concat(260,"px)")}),flex:{flex:1,fontSize:18,fontWeight:300}}},te=a(380),ae=a.n(te),ne=a(381),ie=a.n(ne),ce=a(383),re=a.n(ce),oe=a(385),se=a.n(oe),le=a(382),ue=a.n(le),de=a(384),pe=a.n(de),me=a(345),he=a(599),fe=a(597),ve=a(38),be=a(191),Ee=a(192),ge=function(e){Object(M.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(F.a)(this,a),(n=t.call(this,e)).handleMessage=function(e){var t,a=JSON.parse(e.data);if(a.device_id==n.props.device.id){var i=n.state.chartData;i.datasets[0].data=a.pixels[0],i.datasets[1].data=a.pixels[1],i.datasets[2].data=a.pixels[2],(t=n).setState.apply(t,Object(ve.a)(n.state).concat([{chartData:i}]))}},n.handleOpen=function(e){n.enablePixelVisualization(n.props.device),n.websocketActive=!0},n.handleClose=function(e){n.websocketActive=!1},n.enablePixelVisualization=function(e){n.state.ws.json({id:n.websocketPacketId,type:"subscribe_event",event_type:"device_update",event_filter:{device_id:e.id}}),n.deviceUpdateSubscription=n.websocketPacketId,n.websocketPacketId++},n.disablePixelVisualization=function(){n.state.ws.json({id:n.websocketPacketId,type:"unsubscribe_event",subscription_id:n.deviceUpdateSubscription}),n.deviceUpdateSubscription=null,n.websocketPacketId++},n.connectWebsocket=function(){var e,t="ws://"+window.location.host+"/api/websocket",a=new Ee.a(t,{timeout:5e3,maxAttempts:10,onopen:n.handleOpen,onmessage:n.handleMessage,onclose:n.handleClose,onerror:function(e){return console.log("WebSocket Error:",e)}});(e=n).setState.apply(e,Object(ve.a)(n.state).concat([{ws:a}]))},n.disconnectWebsocket=function(){var e;void 0!=n.state.ws&&n.websocketActive&&(n.state.ws.close(1e3),(e=n).setState.apply(e,Object(ve.a)(n.state).concat([{ws:void 0}])))},n.websocketActive=!1,n.websocketPacketId=1,n.deviceUpdateSubscription=null,n.state=n.getChartOptionsForDevice(e.device),n}return Object(P.a)(a,[{key:"getChartOptionsForDevice",value:function(e){var t;return{chartData:{labels:Array.apply(null,{length:e.config.pixel_count}).map(Function.call,Number),datasets:[{label:"Red",lineTension:.1,backgroundColor:"rgba(255,0,0,0.1)",borderColor:"rgba(255,0,0,1)",pointRadius:0,data:new Array(e.config.pixel_count).fill(0)},{label:"Green",lineTension:.1,backgroundColor:"rgba(0,255,0,0.1)",borderColor:"rgba(0,255,0,1)",pointRadius:0,data:new Array(e.config.pixel_count).fill(0)},{label:"Blue",lineTension:.1,backgroundColor:"rgba(0,0,255,0.1)",borderColor:"rgba(0,0,255,1)",pointRadius:0,data:new Array(e.config.pixel_count).fill(0)}]},chartOptions:(t={responsive:!0,maintainAspectRatio:!1,tooltips:{enabled:!1},hover:{mode:null},animation:{duration:0}},Object(h.a)(t,"hover",{animationDuration:0}),Object(h.a)(t,"responsiveAnimationDuration",0),Object(h.a)(t,"scales",{xAxes:[{gridLines:{display:!1},ticks:{max:e.config.pixel_count,min:0,maxTicksLimit:7}}],yAxes:[{ticks:{display:!1,min:0,max:256,stepSize:64},gridLines:{display:!1,color:"rgba(0, 0, 0, .125)"}}]}),Object(h.a)(t,"legend",{display:!1}),t)}}},{key:"componentDidMount",value:function(){this.connectWebsocket()}},{key:"componentWillUnmount",value:function(){this.disconnectWebsocket()}},{key:"componentWillReceiveProps",value:function(e){this.websocketActive&&(this.disablePixelVisualization(),this.enablePixelVisualization(e.device),this.setState.apply(this,Object(ve.a)(this.state).concat([this.getChartOptionsForDevice(e.device)])))}},{key:"render",value:function(){var e=this.props;e.classes,e.device;return i.a.createElement(be.a,{data:this.state.chartData,options:this.state.chartOptions})}}]),a}(i.a.Component),ye=G()((function(e){return{content:{minWidth:120,maxWidth:"100%"}}}))(ge),Ae=a(343),Oe=a(598),je=a(619),Ce=function(e){Object(M.a)(a,e);var t=Object(V.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).isDeviceOn=function(){return e.props.device.effect&&e.props.device.effect.name},e.toggleOn=function(){e.isDeviceOn()?e.props.dispatch(j(e.props.device.id,null,null)):e.props.dispatch(j(e.props.device.id,"wavelength",null))},e}return Object(P.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.device;return i.a.createElement(fe.a,{container:!0,direction:"col",spacing:1},i.a.createElement(fe.a,{item:!0,xs:!0},i.a.createElement(Y.a,{variant:"h5",color:"inherit",className:t.header},a.config.name),i.a.createElement(Y.a,{variant:"caption text",color:"inherit",className:t.subHeader},"Effect: ",a.effect.name)),i.a.createElement(fe.a,{item:!0},i.a.createElement(Ae.a,{component:je.a,to:"/devices/"+a.id,className:t.deviceLink,key:a.id},"Change Effect")),i.a.createElement(fe.a,null,i.a.createElement(Oe.a,{checked:this.isDeviceOn(),onChange:this.toggleOn,color:"primary"})))}}]),a}(i.a.Component),ke=Object(o.b)()(G()((function(e){return{button:{margin:e.spacing.unit,float:"right"},submitControls:{margin:e.spacing.unit,display:"block",width:"100%"},tableCell:{lineHeight:"1.2",padding:"12px 8px",verticalAlign:"middle"},deviceLink:{textDecoration:"none","&,&:hover":{color:"#000000"}},header:{margin:0},subHeader:{margin:0,color:"#333333"}}}))(Ce)),we=a(208),xe=a(344),De=a(600),Ne=a(346),Se=Object(xe.a)({button:{display:"block",width:"100",float:"right"},action:{padding:"0"}}),Ie=function(e,t){return Object.keys(t).includes(e)||""===e},Te=Object(o.b)((function(e){return{presets:e.presets}}),(function(e){return{addPreset:function(t){return e((a=t,function(e){var t={name:a};return b()("".concat(x,"/presets"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){return e({type:"ADD_PRESET",response:t})})).then((function(){return e(D())}))}));var a}}}))((function(e){var t=e.presets,a=e.addPreset,c=Object(n.useState)(""),r=Object(we.a)(c,2),o=r[0],s=r[1],l=Se();return i.a.createElement(me.a,null,i.a.createElement(he.a,null,i.a.createElement("h3",null,"Add Preset"),"Save current effects of all devices as a preset",i.a.createElement(De.a,{className:l.action},i.a.createElement(Ne.a,{error:Ie(o,t),id:"presetNameInput",label:"Preset Name",onChange:function(e){return s(e.target.value)}}),i.a.createElement(Ae.a,{className:l.button,color:"primary",size:"small","aria-label":"Save",disabled:Ie(o,t),variant:"contained",onClick:function(){return a(o)}},"Save"))))})),Fe=function(e){Object(M.a)(a,e);var t=Object(V.a)(a);function a(){return Object(F.a)(this,a),t.apply(this,arguments)}return Object(P.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.devicesById;return 0==Object.keys(a)?i.a.createElement("div",null,i.a.createElement(me.a,null,i.a.createElement(he.a,null,i.a.createElement("p",null,"Looks like you have no devices! Go to 'Device Management' to add them")))):i.a.createElement("div",null,i.a.createElement(fe.a,{container:!0,direction:"row",spacing:4},Object.keys(a).map((function(e){return i.a.createElement(fe.a,{item:!0,lg:6},i.a.createElement(me.a,{className:t.card},i.a.createElement(he.a,null,i.a.createElement(fe.a,{container:!0,direction:"row",spacing:1},i.a.createElement(fe.a,{item:!0,xs:12},i.a.createElement(ke,{key:e,device:a[e]})),i.a.createElement(fe.a,{item:!0,xs:12},i.a.createElement(ye,{device:a[e]}))))))}))),i.a.createElement(fe.a,{container:!0,direction:"row",spacing:4},i.a.createElement(fe.a,{item:!0,xs:12},i.a.createElement(Te,null))))}}]),a}(i.a.Component);var Pe=Object(o.b)((function(e){return{devicesById:e.devicesById}}))(G()((function(e){return{root:{flexGrow:1},card:{width:"100%",overflowX:"auto"},table:{width:"100%",maxWidth:"100%",backgroundColor:"transparent",borderSpacing:"0"}}}))(Fe)),Me=a(262),Ve=a.n(Me),Re=a(5),Be=a(604),Le=a(605),ze=a(602),We=a(603),Ue=a(606),Qe=a(377),He=a.n(Qe),_e=a(75),Ge=a.n(_e),Ke=function(e){Object(M.a)(a,e);var t=Object(V.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).handleDeleteDevice=function(){e.props.onDelete(e.props.device.id)},e}return Object(P.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.device;e.onDelete;return i.a.createElement(ze.a,{key:a.id},i.a.createElement(We.a,{component:"th",scope:"row"},i.a.createElement(je.a,{to:"/devices/"+a.id,className:t.deviceLink,key:a.id},a.config.name)),i.a.createElement(We.a,{className:t.tableCell},a.config.ip_address),i.a.createElement(We.a,{className:t.tableCell},a.config.pixel_count),i.a.createElement(We.a,{className:t.tableCell},a.type),i.a.createElement(We.a,{className:t.tableCell,numeric:!0},i.a.createElement(Ae.a,{variant:"contained",size:"small",className:t.deleteButton,onClick:this.handleDeleteDevice},i.a.createElement(He.a,{style:{fontSize:16}}))))}}]),a}(i.a.Component),Je=Object(Re.a)((function(e){return{tableCell:{lineHeight:"1.42857143",padding:"12px 8px",verticalAlign:"middle"},button:{margin:0,padding:0,minWidth:32},deleteButton:{minWidth:32,color:e.palette.getContrastText(Ge.a[500]),backgroundColor:Ge.a[500],"&:hover":{backgroundColor:Ge.a[700]}},deviceLink:{textDecoration:"none","&,&:hover":{color:"#000000"}}}}))(Ke),qe=function(e){Object(M.a)(a,e);var t=Object(V.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).handleDeleteDevice=function(t){e.props.dispatch(A(t))},e}return Object(P.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.devicesById;return i.a.createElement("div",{className:a.tableResponsive},i.a.createElement(Be.a,{className:a.table},i.a.createElement(Le.a,null,i.a.createElement(ze.a,null,i.a.createElement(We.a,null,"Name"),i.a.createElement(We.a,{className:a.tableCell},"IP Address"),i.a.createElement(We.a,{className:a.tableCell},"Pixel Count"),i.a.createElement(We.a,{className:a.tableCell},"Type"),i.a.createElement(We.a,{className:a.tableCell,numeric:!0},"Manage"))),i.a.createElement(Ue.a,null,Object.keys(n).map((function(t){return i.a.createElement(Je,{key:t,device:n[t],onDelete:e.handleDeleteDevice})})))))}}]),a}(i.a.Component);var Xe=Object(o.b)((function(e){return{devicesById:e.devicesById}}))(Object(Re.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},nested:{paddingLeft:4*e.spacing.unit},table:{marginBottom:"0",width:"100%",maxWidth:"100%",backgroundColor:"transparent",borderSpacing:"0",borderCollapse:"collapse"},tableResponsive:{width:"100%",overflowX:"auto"},tableCell:{lineHeight:"1.42857143",padding:"12px 8px",verticalAlign:"middle"}}}))(qe)),Ye=a(115),Ze=a(610),$e=a(611),et=a(613),tt=a(612),at=a(264),nt=a(258),it=a(357),ct=a(257),rt=a(608);a(206);var ot=a(501).SchemaForm,st=function(e){Object(M.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(F.a)(this,a),(n=t.call(this,e)).showAdditional=function(){var e;(e=n).setState.apply(e,Object(ve.a)(n.state).concat([{showAdditional:!n.state.showAdditional}]))},n.handleChangeSelectedCollection=function(e){n.state.interRender=!0,n.setState({collectionKey:e.target.value}),n.props.onChange&&n.props.onChange(e.target.value,{})},n.onModelChange=function(e,t){!function(e,t,a,n){var i=/^\d+$/;t||(t=this);var c="string"===typeof e?Object.parse(e):e;if("undefined"!==typeof a&&1===c.length)return t[c[0]]=a,t;if("undefined"!==typeof a&&"undefined"===typeof t[c[0]]&&(t[c[0]]=c.length>2&&i.test(c[1])?[]:{}),"undefined"!==typeof n&&["number","integer"].indexOf(n)>-1&&"undefined"===typeof a)return t[c[0]]=a,t;for(var r=t[c[0]],o=1;o<c.length;o+=1){if(""===c[o])return;if("undefined"!==typeof a){if(o===c.length-1)return r[c[o]]=a,a;var s=r[c[o]];"undefined"!==typeof s&&null!==s||(s=i.test(c[o+1])?[]:{},r[c[o]]=s),r=s}else r&&(r=r[c[o]])}}(e,n.state.model,t)},n.handleSubmit=function(e){e.preventDefault(),n.props.onSubmit&&n.props.onSubmit(n.state.collectionKey,n.state.model)},n.state={collectionKey:"",interRender:!1,showAdditional:!1,model:{},form:["*",{type:"submit",title:"Save"}],action:[[{category:"user",name:"addAddress",readOnly:!1,title:"New"}]]},n}return Object(P.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.classes,n=(e.onChange,e.onSubmit,e.schemaCollection),c=e.currentEffect,r=e.useAdditionalProperties,o=Object(Ye.a)(e,["children","classes","onChange","onSubmit","schemaCollection","currentEffect","useAdditionalProperties"]);void 0!==c&&null!==c&&null!==c.effect&&0==this.state.interRender&&(void 0===c.effect.type?this.state.collectionKey="":this.state.collectionKey=c.effect.type,void 0===c.effect.config?this.state.model={}:this.state.model=c.effect.config),this.state.interRender=!1;var s={type:"object",title:"Effect Configuration",properties:{}};""!==this.state.collectionKey&&(s=Object(f.a)(Object(f.a)({},s),n[this.state.collectionKey].schema));var l=i.a.createElement(ct.a,{className:a.control},i.a.createElement(nt.a,null,"Type"),i.a.createElement(at.a,{value:this.state.collectionKey,onChange:this.handleChangeSelectedCollection},i.a.createElement(it.a,{value:"",select:"selected"},i.a.createElement("em",null,"None")),Object.keys(n).map((function(e){return i.a.createElement(it.a,{key:e,value:e},e)})))),u=null,d=["*"],p=s.required,m=Object.keys(s.properties).filter((function(e){return p&&-1===p.indexOf(e)}));return r&&m.length&&(d=p,u=i.a.createElement("div",{className:a.additionalWrapper},i.a.createElement(Ae.a,{size:"small",className:a.additionalButton,onClick:this.showAdditional},"Additional Configuration"),i.a.createElement(rt.a,{in:this.state.showAdditional},i.a.createElement("div",{className:a.flexWrap},i.a.createElement(ot,Object.assign({className:a.schemaForm,schema:s,form:m,model:this.state.model,onModelChange:this.onModelChange},o)))))),i.a.createElement("form",{onSubmit:this.handleSubmit,className:a.form},l,i.a.createElement(ot,Object.assign({className:a.schemaForm,schema:s,form:d,model:this.state.model,onModelChange:this.onModelChange},o)),u,t||i.a.createElement(Ae.a,{type:"submit",className:a.button},"Submit"))}}]),a}(i.a.Component),lt=G()((function(e){return{form:{display:"flex",flexWrap:"wrap"},flexWrap:{display:"flex",flexWrap:"wrap"},control:{margin:e.spacing.unit,width:"100%"},schemaForm:{marginLeft:2*e.spacing.unit,marginRight:2*e.spacing.unit,display:"flex",flexWrap:"wrap",width:"100%"},additionalWrapper:{display:"inline-grid"},additionalButton:{display:"block",width:"100%",float:"right"}}}))(st),ut=function(e){Object(M.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(F.a)(this,a),(n=t.call(this,e)).handleClose=function(){n.props.onClose()},n.handleSubmit=function(e,t){n.props.dispatch(y(e,t)),n.props.onClose()},n}return Object(P.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=(e.dispatch,e.schemas),n=(e.onClose,Object(Ye.a)(e,["classes","dispatch","schemas","onClose"]));return i.a.createElement(Ze.a,Object.assign({onClose:this.handleClose,className:t.cardResponsive,"aria-labelledby":"form-dialog-title"},n),i.a.createElement(et.a,{id:"form-dialog-title"},"Add Device"),i.a.createElement($e.a,{className:t.cardResponsive},i.a.createElement(tt.a,null,"To add a device to LedFx, please first select the type of device you wish to add then provide the necessary configuration."),i.a.createElement(lt,{schemaCollection:a.devices,onSubmit:this.handleSubmit,useAdditionalProperties:!0},i.a.createElement(Ae.a,{className:t.button,type:"submit",color:"primary"},"Add"),i.a.createElement(Ae.a,{className:t.button,onClick:this.handleClose,color:"primary"},"Cancel"))))}}]),a}(i.a.Component);var dt=Object(o.b)((function(e){return{schemas:e.schemas}}))(G()((function(e){return{button:{float:"right"}}}))(ut)),pt=function(e){Object(M.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(F.a)(this,a),(n=t.call(this,e)).openAddDeviceDialog=function(){var e;(e=n).setState.apply(e,Object(ve.a)(n.state).concat([{addDialogOpened:!0}]))},n.closeAddDeviceDialog=function(){var e;(e=n).setState.apply(e,Object(ve.a)(n.state).concat([{addDialogOpened:!1}]))},n.state={addDialogOpened:!1},n}return Object(P.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes;e.schemas;return i.a.createElement("div",null,i.a.createElement(fe.a,{container:!0,spacing:16},i.a.createElement(fe.a,{item:!0,xs:12,sm:12,md:12},i.a.createElement(me.a,null,i.a.createElement(he.a,null,i.a.createElement(Xe,null))))),i.a.createElement(Ae.a,{variant:"fab",color:"primary","aria-label":"Add",className:t.button,onClick:this.openAddDeviceDialog},i.a.createElement(Ve.a,null)),i.a.createElement(dt,{open:this.state.addDialogOpened,onClose:this.closeAddDeviceDialog}))}}]),a}(i.a.Component),mt=G()((function(e){return{cardResponsive:{width:"100%",overflowX:"auto"},button:{position:"absolute",bottom:2*e.spacing.unit,right:2*e.spacing.unit},dialogButton:{float:"right"}}}))(pt),ht=function(e){Object(M.a)(a,e);var t=Object(V.a)(a);function a(){return Object(F.a)(this,a),t.apply(this,arguments)}return Object(P.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.devices;return i.a.createElement(Be.a,{className:t.table},i.a.createElement(Le.a,null,i.a.createElement(ze.a,null,i.a.createElement(We.a,null,"Device"),i.a.createElement(We.a,null,"Effect"))),i.a.createElement(Ue.a,null,ft(a)))}}]),a}(i.a.Component),ft=function(e){return Object.keys(e).filter((function(t){return!!e[t].type})).map((function(t){return i.a.createElement(ze.a,{key:t},i.a.createElement(We.a,null,t),i.a.createElement(We.a,null,e[t].type))}))},vt=Object(Re.a)((function(e){return{table:{}}}))(ht),bt=function(e){Object(M.a)(a,e);var t=Object(V.a)(a);function a(){return Object(F.a)(this,a),t.apply(this,arguments)}return Object(P.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.preset,n=e.activatePreset,c=e.deletePreset;return i.a.createElement(me.a,null,i.a.createElement(he.a,null,i.a.createElement("h3",null,a.name),a.devices&&i.a.createElement(vt,{devices:a.devices})),i.a.createElement(De.a,{className:t.submitControls},i.a.createElement(Ae.a,{className:t.button,color:"primary",size:"small","aria-label":"Activate",variant:"contained",onClick:function(){return n(a.id)}},"Activate"),i.a.createElement(Ae.a,{className:t.deleteButton,color:"red",size:"small","aria-label":"Delete",variant:"contained",onClick:function(){return c(a.id)}},"Delete")))}}]),a}(i.a.Component),Et=Object(o.b)(null,(function(e){return{deletePreset:function(t){return e((a=t,function(e){var t={id:a};return b()("".concat(x,"/presets"),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){return e({type:"DELETE_PRESET",response:t})})).then((function(){return e(D())}))}));var a},activatePreset:function(t){return e((a=t,function(e){var t={id:a,action:"activate"};b()("".concat(x,"/presets"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){return e({type:"ACTIVATE_PRESET",response:t})}))}));var a}}}))(Object(Re.a)((function(e){return{deleteButton:{color:e.palette.getContrastText(Ge.a[500]),backgroundColor:Ge.a[500],"&:hover":{backgroundColor:Ge.a[700]},margin:e.spacing.unit,float:"right"},button:{margin:e.spacing.unit,float:"right"},submitControls:{margin:e.spacing.unit,display:"block",width:"100%"}}}))(bt)),gt=function(e){Object(M.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(F.a)(this,a),(n=t.call(this,e)).handleClose=function(){n.props.onClose()},n.handleSubmit=function(e,t){n.props.dispatch(y(e,t)),n.props.onClose()},n}return Object(P.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=(e.dispatch,e.schemas),n=(e.onClose,Object(Ye.a)(e,["classes","dispatch","schemas","onClose"]));return i.a.createElement(Ze.a,Object.assign({onClose:this.handleClose,className:t.cardResponsive,"aria-labelledby":"form-dialog-title"},n),i.a.createElement(et.a,{id:"form-dialog-title"},"Add Preset"),i.a.createElement($e.a,{className:t.cardResponsive},i.a.createElement(tt.a,null,"To add a preset to LedFx, please first configure the effects you wish to save, select the type of preset you wish, and then provide the necessary configuration."),i.a.createElement(lt,{schemaCollection:a.devices,onSubmit:this.handleSubmit,useAdditionalProperties:!0},i.a.createElement(Ae.a,{className:t.button,type:"submit",color:"primary"},"Add"),i.a.createElement(Ae.a,{className:t.button,onClick:this.handleClose,color:"primary"},"Cancel"))))}}]),a}(i.a.Component);Object(o.b)((function(e){return{schemas:e.schemas}}))(G()((function(e){return{button:{float:"right"}}}))(gt));var yt=function(e,t){return Object(f.a)({id:e},t)},At=function(e){Object(M.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(F.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.props.getPresets()},n}return Object(P.a)(a,[{key:"render",value:function(){this.props.classes;return i.a.createElement("div",null,i.a.createElement(fe.a,{container:!0,direction:"row",spacing:4},i.a.createElement(fe.a,{item:!0,xs:12},i.a.createElement(Te,null)),i.a.createElement(fe.a,{item:!0,xs:12},i.a.createElement(i.a.Fragment,null,Ot(this.props.presets)))))}}]),a}(i.a.Component),Ot=function(e){return Object.keys(e).map((function(t){return i.a.createElement(Et,{key:t,preset:yt(t,e[t])})}))},jt=Object(o.b)((function(e){return{presets:e.presets}}),(function(e){return{getPresets:function(){return e(D())}}}))(G()((function(e){return{cardResponsive:{width:"100%",overflowX:"auto"},button:{position:"absolute",bottom:2*e.spacing.unit,right:2*e.spacing.unit},dialogButton:{float:"right"}}}))(At)),Ct=a(379),kt=a.n(Ct),wt=window.location.protocol+"//"+window.location.host+"/api/";function xt(e,t,a){return kt()({method:e,url:wt+t,data:a})}function Dt(e){return xt("get","devices/"+e+"/effects").then((function(e){return e.data}))}var Nt=function(e){Object(M.a)(a,e);var t=Object(V.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).handleClearEffect=function(){e.props.dispatch(j(e.props.device.id,null,null))},e.handleSetEffect=function(t,a){e.props.dispatch(j(e.props.device.id,t,a))},e}return Object(P.a)(a,[{key:"componentDidMount",value:function(){var e;this.props.dispatch((e=this.props.device.id,function(t){return b()("".concat(E,"/devices/").concat(e,"/effects")).then((function(e){return e.json()})).then((function(a){return t(C(e,a))}))}))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.schemas,n=e.effect;if(a.effects){return void 0!==n&&null!==n&&null!==n.effect&&n.effect.type,i.a.createElement("div",null,i.a.createElement(Y.a,{variant:"h5",color:"inherit"},"Effect Control"),i.a.createElement(lt,{schemaCollection:a.effects,currentEffect:n,onSubmit:this.handleSetEffect},i.a.createElement("div",{className:t.submitControls},i.a.createElement(Ae.a,{className:t.button,type:"submit",variant:"contained",color:"primary"},"Set Effect"),i.a.createElement(Ae.a,{className:t.button,onClick:this.handleClearEffect,color:"primary"},"Clear Effect"))))}return i.a.createElement("p",null,"Loading")}}]),a}(i.a.Component);var St=Object(o.b)((function(e){return{schemas:e.schemas}}))(G()((function(e){return{button:{margin:e.spacing.unit,float:"right"},submitControls:{margin:e.spacing.unit,display:"block",width:"100%"}}}))(Nt)),It=function(e){Object(M.a)(a,e);var t=Object(V.a)(a);function a(){var e;return Object(F.a)(this,a),(e=t.call(this)).state={device:null,effect:null},e}return Object(P.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.device_id;this.state.device=null,function(e){return xt("get","devices/"+e).then((function(t){var a=t.data;return{key:e,id:e,name:a.name,config:a}}))}(t).then((function(t){e.setState({device:t})})).catch((function(e){return console.log(e)})),this.state.effect=null,Dt(t).then((function(t){e.setState({effect:t})})).catch((function(e){return console.log(e)}))}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=null;this.props.devicesById&&(this.state.device=null,a=this.props.devicesById[e.match.params.device_id],this.setState.apply(this,Object(ve.a)(this.state).concat([{device:a}]))),void 0!==a&&null!==a&&(this.state.effect=null,Dt(a.id).then((function(e){t.setState({effect:e})})).catch((function(e){return console.log(e)})))}},{key:"render",value:function(){this.props.classes,this.props.match.params.device_id;var e=this.state,t=e.device,a=e.effect;return t?i.a.createElement(fe.a,{container:!0,direction:"row",spacing:4},Tt(t,a),i.a.createElement(fe.a,{item:!0,xs:12},i.a.createElement(me.a,null,i.a.createElement(he.a,null,i.a.createElement(St,{device:t,effect:a}))))):i.a.createElement("p",null,"Loading")}}]),a}(i.a.Component),Tt=function(e,t){if(e.effect&&e.effect.name)return console.log(t),i.a.createElement(fe.a,{item:!0,xs:12},i.a.createElement(me.a,null,i.a.createElement(he.a,null,i.a.createElement(ye,{device:e}))))};var Ft=Object(o.b)((function(e){return{devicesById:e.devicesById}}))(It),Pt=Object(xe.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}})),Mt=function(e){var t=e.audioDevices,a=e.setAudioDevice,c=t.active_device_index,r=Object(n.useState)(c),o=Object(we.a)(r,2),s=o[0],l=o[1];return i.a.createElement(me.a,null,i.a.createElement(he.a,null,i.a.createElement("h3",null,"Audio"),i.a.createElement("p",null,"Current device: ",t.devices[c]),i.a.createElement(ct.a,null,i.a.createElement(at.a,{id:"audio-input-select",value:s,onChange:function(e){return t=e.target.value,l(t),void a(t);var t}},Vt(t.devices)))))},Vt=function(e){return Object.keys(e).map((function(t){return i.a.createElement(it.a,{key:t,value:t},e[t])}))},Rt=Object(o.b)((function(e){return{settings:e.settings}}),(function(e){return{getAudioDevices:function(){return e(N())},setAudioDevice:function(t){return e(function(e){return function(t){var a={index:parseInt(e)};fetch("".concat("http://127.0.0.1:8888/api","/audio/devices"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){return t({type:"GET_AUDIO_INPUT",response:e})})).then((function(){return t(N())}))}}(t))}}}))((function(e){var t=e.getAudioDevices,a=e.setAudioDevice,c=e.settings,r=Pt();Object(n.useEffect)((function(){t()}),[]);var o=c.audioDevices;return i.a.createElement("div",{className:r.root},o&&i.a.createElement(Mt,{audioDevices:o,setAudioDevice:a}))})),Bt=function(e){Object(M.a)(a,e);var t=Object(V.a)(a);function a(e){var n,i;return Object(F.a)(this,a),(i=t.call(this,e)).handleMessage=function(e){var t,a=i.state.chartData,n=JSON.parse(e.data);a.labels=n.frequencies,a.datasets[0].data=n.melbank;var c=Math.max.apply(Math,n.melbank),r=i.state.chartOptions;r.scales.yAxes[0].ticks.min=0,r.scales.yAxes[0].ticks.max=Math.max(r.scales.yAxes[0].ticks.max,c),r.scales.yAxes[0].ticks.stepSize=r.scales.yAxes[0].ticks.max/4,(t=i).setState.apply(t,Object(ve.a)(i.state).concat([{chartData:a,chartOptions:r}]))},i.handleOpen=function(e){i.enablePixelVisualization()},i.handleClose=function(e){},i.enablePixelVisualization=function(){i.state.ws.json({id:i.websocketPacketId,type:"subscribe_event",event_type:"graph_update",event_filter:{graph_id:i.props.graphId}}),i.deviceUpdateSubscription=i.websocketPacketId,i.websocketPacketId++},i.disablePixelVisualization=function(){i.state.ws.json({id:i.websocketPacketId,type:"unsubscribe_event",subscription_id:i.deviceUpdateSubscription}),i.deviceUpdateSubscription=null,i.websocketPacketId++},i.connectWebsocket=function(){var e,t="ws://"+window.location.host+"/api/websocket",a=new Ee.a(t,{timeout:5e3,maxAttempts:10,onopen:i.handleOpen,onmessage:i.handleMessage,onclose:i.handleClose,onerror:function(e){return console.log("WebSocket Error:",e)}});(e=i).setState.apply(e,Object(ve.a)(i.state).concat([{ws:a}]))},i.disconnectWebsocket=function(){var e;void 0!=i.state.ws&&(i.state.ws.close(1e3),(e=i).setState.apply(e,Object(ve.a)(i.state).concat([{ws:void 0}])))},i.websocketPacketId=1,i.deviceUpdateSubscription=null,i.state={chartData:{labels:[],datasets:[{label:"Melbank",lineTension:.1,backgroundColor:"rgba(0,0,0,0.1)",borderColor:"rgba(0,0,0,1)",pointRadius:0,data:[]}]},chartOptions:(n={responsive:!0,maintainAspectRatio:!1,tooltips:{enabled:!1},hover:{mode:null},animation:{duration:0}},Object(h.a)(n,"hover",{animationDuration:0}),Object(h.a)(n,"responsiveAnimationDuration",0),Object(h.a)(n,"scales",{xAxes:[{gridLines:{display:!1},ticks:{maxTicksLimit:7,callback:function(e,t,a){return e+" Hz"}}}],yAxes:[{ticks:{min:0,max:2,stepSize:.5},gridLines:{color:"rgba(0, 0, 0, .125)"}}]}),Object(h.a)(n,"legend",{display:!1}),n)},i}return Object(P.a)(a,[{key:"componentDidMount",value:function(){this.connectWebsocket()}},{key:"componentWillUnmount",value:function(){this.disconnectWebsocket()}},{key:"render",value:function(){var e=this.props.classes;return i.a.createElement(me.a,null,i.a.createElement(he.a,{className:e.content},i.a.createElement(be.a,{data:this.state.chartData,options:this.state.chartOptions})))}}]),a}(i.a.Component),Lt=G()((function(e){return{content:{minWidth:120,maxWidth:"100%"}}}))(Bt),zt=function(e){Object(M.a)(a,e);var t=Object(V.a)(a);function a(){return Object(F.a)(this,a),t.apply(this,arguments)}return Object(P.a)(a,[{key:"componentDidMount",value:function(){this.props.match.params.device_id}},{key:"render",value:function(){this.props.classes;var e=this.props.match.params.graphString.split("+"),t=Object.keys(e).map((function(t){return i.a.createElement(fe.a,{item:!0,xs:12},i.a.createElement("p",null,e[t].replace(/^\w/,(function(e){return e.toUpperCase()}))," Graph"),i.a.createElement(Lt,{key:t,graphId:e[t]}))}));return i.a.createElement(fe.a,{container:!0,spacing:24},t)}}]),a}(i.a.Component),Wt=[{path:"/dashboard",sidebarName:"Dashboard",navbarName:"Dashboard",icon:ae.a,component:Pe},{path:"/devices/:device_id",navbarName:"Devices",sidebarName:"Devices",icon:ie.a,component:Ft},{path:"/presets",sidebarName:"Presets Management",navbarName:"Presets Management",icon:ue.a,component:jt},{path:"/devices",sidebarName:"Device Management",navbarName:"Device Management",icon:re.a,component:mt},{path:"/settings",sidebarName:"Settings",navbarName:"Settings",icon:pe.a,component:Rt},{path:"/developer/:graphString",navbarName:"Developer",component:zt},{path:"/developer/melbank",sidebarName:"Developer",navbarName:"Developer",icon:se.a,component:zt},{redirect:!0,path:"/",to:"/dashboard",navbarName:"Redirect"}],Ut=function(e){Object(M.a)(a,e);var t=Object(V.a)(a);function a(){return Object(F.a)(this,a),t.apply(this,arguments)}return Object(P.a)(a,[{key:"getPageName",value:function(){var e,t=this;if(Wt.map((function(a,n){return a.path===t.props.location.pathname&&(e=a.navbarName),null})),!e){var a=this.props.location.pathname;if(a.startsWith("/devices/")){var n=a.replace("/devices/",""),i=void 0!=this.props.devicesById[n]?this.props.devicesById[n].config.name:"";e="Devices / "+i}else a.startsWith("/developer/")&&(e="Developer / Custom")}return e}},{key:"render",value:function(){var e=this.props,t=e.classes;e.color;return i.a.createElement(K.a,{className:t.appBar},i.a.createElement(J.a,null,i.a.createElement(Y.a,{variant:"title",color:"inherit",className:t.flex},this.getPageName()),i.a.createElement(X.a,{mdUp:!0},i.a.createElement(q.a,{color:"inherit","aria-label":"open drawer",onClick:this.props.handleDrawerToggle},i.a.createElement($.a,null)))))}}]),a}(i.a.Component);var Qt=Object(o.b)((function(e){return{devicesById:e.devicesById}}))(G()(ee)(Ut)),Ht=a(55),_t=a(586),Gt=a(587),Kt=a(614),Jt=a(615),qt=function(e){return{drawerPaper:Object(h.a)({width:260},e.breakpoints.up("md"),{width:260,position:"fixed",height:"100%"}),logo:{position:"relative",padding:"15px 15px",zIndex:"4","&:after":{content:'""',position:"absolute",bottom:"0",height:"1px",right:"15px",width:"calc(100% - 30px)",backgroundColor:"rgba(180, 180, 180, 0.3)"}},logoLink:{padding:"5px 0",display:"block",fontSize:"18px",textAlign:"left",fontWeight:"400",lineHeight:"30px",textDecoration:"none",backgroundColor:"transparent","&,&:hover":{color:"#FFFFFF"}},logoImage:{width:"30px",display:"inline-block",maxHeight:"30px",marginLeft:"10px",marginRight:"15px"},img:{width:"35px",top:"17px",position:"absolute",verticalAlign:"middle",border:"0"},background:{position:"absolute",zIndex:"1",height:"100%",width:"100%",display:"block",top:"0",left:"0",backgroundSize:"cover",backgroundPosition:"center center","&:after":{position:"absolute",zIndex:"3",width:"100%",height:"100%",content:'""',display:"block",background:"#000",opacity:".8"}},list:{marginTop:"20px",paddingLeft:"0",paddingTop:"0",paddingBottom:"0",marginBottom:"0",listStyle:"none",position:"unset"},item:{position:"relative",display:"block",textDecoration:"none","&:hover,&:focus,&:visited,&":{color:"#FFFFFF"}},itemLink:{width:"auto",transition:"all 300ms linear",margin:"10px 15px 0",borderRadius:"3px",position:"relative",display:"block",padding:"10px 15px",backgroundColor:"transparent"},itemIcon:{width:"24px",minWidth:"24px",height:"30px",float:"left",marginRight:"15px",textAlign:"center",verticalAlign:"middle",color:"rgba(255, 255, 255, 0.8)"},itemText:{margin:"0",lineHeight:"30px",fontSize:"14px",fontWeight:300,color:"#FFFFFF"},devicesItemText:{margin:"0",marginLeft:"10px",lineHeight:"30px",fontSize:"14px",fontWeight:300,color:"#FFFFFF",textDecoration:"none"},activeView:{backgroundColor:[e.palette.primary.main],boxShadow:[e.shadows[12]],"&:hover,&:focus,&:visited,&":{backgroundColor:[e.palette.primary.main],boxShadow:[e.shadows[12]]},color:"#FFFFFF"},sidebarWrapper:{position:"relative",height:"calc(100vh - 70px)",overflow:"auto",zIndex:"4",overflowScrolling:"touch"}}},Xt=a(263),Yt=a.n(Xt),Zt=function(e){Object(M.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(F.a)(this,a),(n=t.call(this,e)).state={devMode:!1},b()("".concat(E,"/config")).then((function(e){return e.json()})).then((function(e){var t=!1;e.config.dev_mode&&(t=!0),n.setState({devMode:t})})),n}return Object(P.a)(a,[{key:"isViewActive",value:function(e){return this.props.location.pathname==e}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=(t.color,t.devicesById),c=t.effectLinks,r=Object.keys(n).map((function(t){var c=a.itemLink;return e.isViewActive("/devices/"+t)&&(c=c+" "+a.activeView),i.a.createElement(je.a,Object(h.a)({to:"/devices/"+n[t].id,className:a.item,key:n[t].id,activeClassName:"active"},"key",t),i.a.createElement(Gt.a,{button:!0,className:c},i.a.createElement(Jt.a,{primary:n[t].config.name,className:a.devicesItemText,disableTypography:!0})))})),o=i.a.createElement(_t.a,{className:a.list},Wt.map((function(t,n){if(t.redirect||!t.sidebarName)return null;if("Developer"===t.sidebarName&&!e.state.devMode)return null;var o=a.itemLink;return e.isViewActive(t.path)&&"Devices"!=t.sidebarName&&(o=o+" "+a.activeView),e.isViewActive(t.path)&&"EffectPresets"!=t.sidebarName&&(o=o+" "+a.activeView),"Devices"===t.sidebarName?i.a.createElement(Gt.a,{button:!0,className:o},i.a.createElement(Kt.a,{className:a.itemIcon},i.a.createElement(t.icon,null)),i.a.createElement(Jt.a,{primary:t.sidebarName,className:a.itemText,disableTypography:!0}),i.a.createElement(_t.a,{className:a.list},r)):"EffectPresets"===t.sidebarName?i.a.createElement(Gt.a,{button:!0,className:o},i.a.createElement(Kt.a,{className:a.itemIcon},i.a.createElement(t.icon,null)),i.a.createElement(Jt.a,{primary:t.sidebarName,className:a.itemText,disableTypography:!0}),i.a.createElement(_t.a,{className:a.list},c)):i.a.createElement(je.a,{to:t.path,className:a.item,activeClassName:"active",key:n},i.a.createElement(Gt.a,{button:!0,className:o},i.a.createElement(Kt.a,{className:a.itemIcon},i.a.createElement(t.icon,null)),i.a.createElement(Jt.a,{primary:t.sidebarName,className:a.itemText,disableTypography:!0})))}))),s=i.a.createElement("div",{className:a.logo},i.a.createElement("a",{href:"#",className:a.logoLink},i.a.createElement("div",{className:a.logoImage},i.a.createElement("img",{src:Yt.a,alt:"logo",className:a.img})),"LedFx"));return i.a.createElement("div",null,i.a.createElement(X.a,{mdUp:!0},i.a.createElement(Ht.a,{variant:"temporary",anchor:"right",open:this.props.open,classes:{paper:a.drawerPaper},onClose:this.props.handleDrawerToggle,ModalProps:{keepMounted:!0}},s,i.a.createElement("div",{className:a.sidebarWrapper},o),i.a.createElement("div",{className:a.background}))),i.a.createElement(X.a,{smDown:!0,implementation:"css"},i.a.createElement(Ht.a,{open:!0,variant:"permanent",classes:{paper:a.drawerPaper}},s,i.a.createElement("div",{className:a.sidebarWrapper},o),i.a.createElement("div",{className:a.background}))))}}]),a}(i.a.Component);var $t=Object(o.b)((function(e){return{devicesById:e.devicesById}}))(G()(qt)(Zt)),ea=function(e){return{root:{overflow:"hidden",display:"flex",width:"100%"},content:Object(h.a)({flexGrow:1,backgroundColor:e.palette.background.default,padding:3*e.spacing.unit,minWidth:200},e.breakpoints.up("md"),{marginLeft:260}),toolbar:e.mixins.toolbar}},ta=Object(B.a)({palette:{primary:W.a,secondary:Q.a},overrides:{MuiFormControl:{root:{margin:8,minWidth:225,flex:"1 0 30%"}}}}),aa=function(e){Object(M.a)(a,e);var t=Object(V.a)(a);function a(e){var n;return Object(F.a)(this,a),(n=t.call(this,e)).state={mobileOpen:!1,theme:ta},n}return Object(P.a)(a,[{key:"componentDidUpdate",value:function(e){if(e.history.location.pathname!==e.location.pathname&&(this.refs.root.scrollTop=0,this.state.mobileOpen)){var t=Object.assign({},this.state,{mobileOpen:!1});this.setState(t)}}},{key:"componentDidMount",value:function(){this.props.dispatch(O()),this.props.dispatch(w())}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=(t.rest,function(){var t=Object.assign({},e.state,{mobileOpen:!e.state.mobileOpen});e.setState(t)});return i.a.createElement("div",{className:a.root,ref:"root"},i.a.createElement(H.a,null),i.a.createElement(L.a,{theme:this.state.theme},i.a.createElement(Qt,{handleDrawerToggle:n,location:this.props.location}),i.a.createElement($t,{handleDrawerToggle:n,open:this.state.mobileOpen,location:this.props.location}),i.a.createElement("div",{className:a.content},i.a.createElement("div",{className:a.toolbar}),i.a.createElement(p.a,null,Wt.map((function(e,t){return e.redirect?i.a.createElement(R.a,{from:e.path,to:e.to,key:t}):i.a.createElement(m.a,{exact:!0,path:e.path,component:e.component,key:t})}))))))}}]),a}(i.a.Component);var na=[{path:"/",component:Object(o.b)((function(e){return{devicesById:e.devicesById,schemas:e.schemas}}))(G()(ea)(aa))}],ia=(a(576),Object(l.a)()),ca=Object(u.d)(T,Object(u.a)(s.a));function ra(){return i.a.createElement(o.a,{store:ca},i.a.createElement(d.a,{history:ia},i.a.createElement(p.a,null,na.map((function(e,t){return i.a.createElement(m.a,{path:e.path,component:e.component,key:t})})))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(ra,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[396,1,2]]]);
//# sourceMappingURL=main.f02fceaa.chunk.js.map